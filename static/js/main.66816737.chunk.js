(this["webpackJsonpcontract-finder-client"]=this["webpackJsonpcontract-finder-client"]||[]).push([[0],{271:function(e,t,n){e.exports=n(460)},277:function(e,t,n){},279:function(e,t,n){},460:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(44),i=n.n(o),c=(n(276),n(277),n(10)),l=n.n(c),s=n(23),u=n(8),d=n(15),p=n(16),m=n(3),h=n(19),y=n(18),f=(n(279),n(45)),g=n(50),b=n(9),v=n(2),E=function(e){Object(h.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={text:"",field:"name",valid:!0},a.onChangeText=a.onChangeText.bind(Object(m.a)(a)),a}return Object(p.a)(n,[{key:"onChangeText",value:function(e){var t=function(e){return"0x"===e.slice(0,2)?42===e.length?{field:"address",valid:!0}:10===e.length?{field:"signature",valid:!0}:{field:"unknown",valid:!1}:{field:"name",valid:!0}}(e);this.setState(Object(u.a)({text:e},t)),t.valid&&this.props.onQueryChange(Object(u.a)({text:e},t))}},{key:"render",value:function(){var e=this;return r.a.createElement(v.Item,{error:!this.state.valid},r.a.createElement(v.Icon,{name:"search"}),r.a.createElement(v.Input,{placeholder:"name / address / signature",onChangeText:function(t){return e.onChangeText(t)}}))}}]),n}(a.Component),C=function(e){Object(h.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={field:"inputs",text:"",valid:!0},a.onChangeText=a.onChangeText.bind(Object(m.a)(a)),a.onFieldSelect=a.onFieldSelect.bind(Object(m.a)(a)),a}return Object(p.a)(n,[{key:"onChangeText",value:function(e){this.setState({text:e}),this.props.onQueryChange(Object(u.a)(Object(u.a)({},this.state),{},{text:e}))}},{key:"onFieldSelect",value:function(e){this.setState({field:e}),this.props.onQueryChange(Object(u.a)(Object(u.a)({},this.state),{},{field:e}))}},{key:"render",value:function(){var e=this;return r.a.createElement(v.View,null,r.a.createElement(v.Item,null,r.a.createElement(v.Icon,{name:"search"}),r.a.createElement(v.Input,{placeholder:"type: address / uint256 / ...",onChangeText:function(t){return e.onChangeText(t)}})),r.a.createElement(v.Content,null,r.a.createElement(v.ListItem,{selected:"inputs"===this.state.field,onClick:function(){return e.onFieldSelect("inputs")}},r.a.createElement(v.Radio,{selected:"inputs"===this.state.field}),r.a.createElement(v.Body,null,r.a.createElement(v.Text,{style:{fontFamily:null}},"input"))),r.a.createElement(v.ListItem,{selected:"outputs"===this.state.field,onClick:function(){return e.onFieldSelect("outputs")}},r.a.createElement(v.Radio,{selected:"outputs"===this.state.field}),r.a.createElement(v.Body,null,r.a.createElement(v.Text,{style:{fontFamily:null}},"output")))))}}]),n}(a.Component),k=function(e){Object(h.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={text:"",field:"dtype",valid:!0},a.onChangeText=a.onChangeText.bind(Object(m.a)(a)),a}return Object(p.a)(n,[{key:"onChangeText",value:function(e){var t={field:"dtype",valid:!0};this.setState(Object(u.a)({text:e},t)),t.valid&&this.props.onQueryChange(Object(u.a)({text:e},t))}},{key:"render",value:function(){var e=this;return r.a.createElement(v.Item,{error:!this.state.valid},r.a.createElement(v.Icon,{name:"search"}),r.a.createElement(v.Input,{placeholder:"dtype",onChangeText:function(t){return e.onChangeText(t)}}))}}]),n}(a.Component),w=function(e){Object(h.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={genQuery:{text:"",field:"name"},fxQuery:{text:"",field:"inputs"},dtQuery:{text:"",field:"dtype"}},a.onQueryChangeGeneral=a.onQueryChangeGeneral.bind(Object(m.a)(a)),a.onQueryChangeFx=a.onQueryChangeFx.bind(Object(m.a)(a)),a.onQueryChangedType=a.onQueryChangedType.bind(Object(m.a)(a)),a.onSearch=a.onSearch.bind(Object(m.a)(a)),a}return Object(p.a)(n,[{key:"onQueryChangeGeneral",value:function(e){this.setState({genQuery:e})}},{key:"onQueryChangeFx",value:function(e){this.setState({fxQuery:e})}},{key:"onQueryChangedType",value:function(e){this.setState({dtQuery:e})}},{key:"onSearch",value:function(){this.props.onQueryChange(this.state)}},{key:"render",value:function(){return r.a.createElement(v.View,{style:Object(u.a)(Object(u.a)({},this.props.styles),{},{flex:1})},r.a.createElement(v.Content,null,r.a.createElement(E,{onQueryChange:this.onQueryChangeGeneral}),r.a.createElement(v.Separator,{bordered:!0}),r.a.createElement(C,{onQueryChange:this.onQueryChangeFx}),r.a.createElement(k,{onQueryChange:this.onQueryChangedType})),r.a.createElement(v.View,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-end",padding:5,borderTopWidth:1,borderTopColor:"#cccccc"}},r.a.createElement(v.Left,null,r.a.createElement(v.Button,{small:!0,rounded:!0,style:{backgroundColor:"#cccccc"},onClick:this.onSearch},r.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"import"}))),r.a.createElement(v.Text,null,"Network: ",this.props.chain.name)))}}]),n}(a.Component),O=n(269),I=Object(O.createIframeClient)();function x(){return(x=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.onload();case 2:console.log("exportToRemix",t),t.forEach((function(e){T(e)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(s.a)(l.a.mark((function e(){var t,n,a=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.length>0&&void 0!==a[0]?a[0]:[],n=a.length>1?a[1]:void 0,t instanceof Array||(t=[t]);try{I.call(n,"loadChainLensWorkspace",t)}catch(r){console.error("exportToPlugin failed",n,r)}case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return j.apply(this,arguments)}function j(){return(j=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("sourceByLanguage",t.data.sourceByLanguage),t.data.sourceByLanguage&&t.data.sourceByLanguage[0]){e.next=3;break}return e.abrupt("return");case 3:n=t.data.sourceByLanguage[0].sourcesTemp,Object.keys(n).forEach((function(e){var t="browser/".concat(e);t.includes(".sol")||(t+=".sol"),I.call("fileManager","setFile",t,n[e])}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=n(170),W=function(e){var t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)};var A={event:"#C9DEBB",payable:"#CDE0F2",nonconstant:"#E9DEDE",constant:"rgb(240, 239, 245)"};function L(e){var t=function(e){return"event"===e.type?"event":e.payable?"payable":e.constant?"constant":"nonconstant"}(e);return A[t]}var V=function(e){Object(h.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e))._renderHeader=a._renderHeader.bind(Object(m.a)(a)),a._renderContent=a._renderContent.bind(Object(m.a)(a)),a._renderListItem=a._renderListItem.bind(Object(m.a)(a)),a}return Object(p.a)(n,[{key:"_renderHeader",value:function(e,t){var n=this.props.buttons.header.map((function(t,n){return r.a.createElement(v.Button,{small:!0,rounded:!0,style:R.buttonStyle,key:n,onClick:function(){return t.callback(e)}},r.a.createElement(v.Icon,{type:t.icon.type,name:t.icon.name}))}));return r.a.createElement(v.View,{style:{padding:5,flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"#fafafa"}},r.a.createElement(v.View,{style:{flexDirection:"row"}},t?r.a.createElement(v.Icon,{style:{fontSize:18},name:"remove-circle"}):r.a.createElement(v.Icon,{style:{fontSize:18},name:"add-circle"}),r.a.createElement(v.Text,{style:{fontFamily:null,fontWeight:"400",paddingLeft:10,maxWidth:this.props.styles.minWidth-160}},e.data.name)),r.a.createElement(v.View,{style:{flexDirection:"row"}},n))}},{key:"_renderContent",value:function(e){var t=this,n=[];return(e.pfunctions||[]).forEach((function(a){if(a.data.name){var o=a.data.signatureString;a.data.gapi.outputs&&a.data.gapi.outputs.length>0&&(o+="->(".concat(a.data.gapi.outputs.map((function(e){return e.type})).join(","),")"));var i=t.props.buttons.contentItem.map((function(t,n){return r.a.createElement(v.Button,{small:!0,rounded:!0,style:R.buttonStyle,key:n,onClick:function(){return t.callback({pfunction:a,pclass:e})}},r.a.createElement(v.Icon,{type:t.icon.type,name:t.icon.name}))}));n.push(r.a.createElement(v.ListItem,{key:a._id,style:{backgroundColor:L(a.data.gapi)}},r.a.createElement(v.Left,null,r.a.createElement(v.View,{style:{flexDirection:"row",alignItems:"center"}},"event"===a.data.gapi.type?r.a.createElement(v.Thumbnail,{source:{uri:"/event.png"},style:{height:15,width:15,borderRadius:5}}):r.a.createElement(v.Thumbnail,{source:{uri:"/lambda.png"},style:{height:15,width:15,borderRadius:5}}),r.a.createElement(v.Text,{style:{fontFamily:null,paddingLeft:10,maxWidth:t.props.styles.minWidth-170}},o))),r.a.createElement(v.Right,null,i)))}})),r.a.createElement(v.List,{style:{paddingLeft:15}},n)}},{key:"_renderListItem",value:function(e){var t=e.item;e.index,e.separators;return r.a.createElement(v.Accordion,{dataArray:[t],keyExtractor:function(e){return e._id},renderHeader:this._renderHeader,renderContent:this._renderContent,contentStyle:{flex:1,backgroundColor:"#ffffff"}})}},{key:"render",value:function(){var e=this.props.data;return r.a.createElement(P.a,{data:e,keyExtractor:function(e){return e._id},renderItem:this._renderListItem,scrollEnabled:!0,scrollEventThrottle:300,contentStyle:{flex:1,backgroundColor:"#ffffff"}})}}]),n}(a.Component),R=b.a.create({buttonStyle:{backgroundColor:"#cccccc",marginLeft:15}}),G=function(e){Object(h.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={selected:"remix"},a.onValueChange=a.onValueChange.bind(Object(m.a)(a)),a.exportTo=a.exportTo.bind(Object(m.a)(a)),a}return Object(p.a)(n,[{key:"onValueChange",value:function(e){this.setState({selected:e})}},{key:"exportTo",value:function(e){var t=this.state.selected,n=e?[e]:this.props.treedata;"remix"===t?function(e){x.apply(this,arguments)}(n):function(){S.apply(this,arguments)}(n,"pipeline")}},{key:"render",value:function(){var e=this.props,t={header:[{callback:e.onRemove,icon:{type:"FontAwesome",name:"close"}},{callback:this.exportTo,icon:{type:"MaterialCommunityIcons",name:"import"}}],contentItem:[]};return r.a.createElement(v.View,{style:Object(u.a)(Object(u.a)({},e.styles),{},{flex:1})},r.a.createElement(V,{data:e.treedata,buttons:t,styles:e.styles}),r.a.createElement(v.View,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:5,borderTopWidth:1,borderTopColor:"#cccccc"}},r.a.createElement(v.Left,null,r.a.createElement(v.Button,{small:!0,rounded:!0,style:B.buttonStyle,onClick:e.onGoToSearchList},r.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"chevron-left"}))),r.a.createElement(v.Picker,{mode:"dropdown",style:{width:0,marginRight:10},selectedValue:this.state.selected,onValueChange:this.onValueChange},r.a.createElement(v.Picker.Item,{label:"FileManager",value:"remix"}),r.a.createElement(v.Picker.Item,{label:"Pipeline",value:"pipeline"}),r.a.createElement(v.Picker.Item,{label:"JSON",value:"json"})),r.a.createElement(v.Right,null,r.a.createElement(v.Button,{small:!0,rounded:!0,style:B.buttonStyle,onClick:this.exportTo},r.a.createElement(v.Text,null,e.treedata.length),r.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"import"})))))}}]),n}(a.Component),B=b.a.create({buttonStyle:{backgroundColor:"#cccccc"}}),_={host:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_PIPEOS_SERVER,route:{pclass:"/pclass",pfunction:"/pfunction",dtype:"/dtype",dtypei:"/dtypei"}},F=n(131),N=n(63),D={revalidateOnFocus:!1,revalidateOnReconnect:!1,dedupingInterval:2e4,focusThrottleInterval:5e5,loadingTimeout:5e3,errorRetryInterval:1e4},M="".concat(_.host).concat(_.route.dtype),J="".concat(_.host).concat(_.route.dtypei),Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pclass",n=[];return"pclass"===t&&(n=[{relation:"pfunctions"},{relation:"pclassInstances"}]),"pfunction"===t&&(n=[{relation:"pclass"}]),"pclassi"===t&&(n=[{relation:"pclass",scope:{include:[{relation:"pfunctions"}]}}]),e=Object(u.a)(Object(u.a)({},e),{},{include:n}),console.log("filter",t,e,JSON.stringify(e)),"".concat(_.host,"/").concat(t,"?filter=").concat(JSON.stringify(e))},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return console.log("pclassCount",e.where,JSON.stringify(e.where)),"".concat(_.host,"/").concat(t,"/count?where=").concat(JSON.stringify(e.where))};function z(e){return U.apply(this,arguments)}function U(){return(U=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("!! fetcher"),e.next=3,Object(F.a)(t);case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pclass";return Object(N.a)(Q(e,t),z,D)}function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pclass";return Object(N.a)(H(e,t),z,D)}var K=function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("insertType",M,t),e.next=3,Object(F.a)(M,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("insertTypeValue",J,t),e.next=3,Object(F.a)(J,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Y(e){return r.a.createElement(v.View,{style:Object(u.a)(Object(u.a)({},e.styles),{},{flex:1})},r.a.createElement(V,{data:e.data,buttons:e.buttons,styles:e.styles}),r.a.createElement(v.View,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:5,borderTopWidth:1,borderTopColor:"#cccccc"}},r.a.createElement(v.Button,{small:!0,rounded:!0,style:re.buttonStyle,onClick:e.onGoToSearch},r.a.createElement(v.Icon,{name:"search"}),r.a.createElement(v.Text,null,e.resultsCount)),r.a.createElement(v.View,{style:{flexDirection:"row",alignItems:"center"}},r.a.createElement(v.Button,{small:!0,rounded:!0,style:re.buttonStyle,onClick:e.onPreviousPage},r.a.createElement(v.Icon,{type:"FontAwesome",name:"caret-left"})),r.a.createElement(v.Text,null,"@",(e.filter.skip||0)+1),r.a.createElement(v.Button,{small:!0,rounded:!0,style:re.buttonStyle,onClick:e.onAddListPage},r.a.createElement(v.Icon,{type:"FontAwesome",name:"caret-right"}))),r.a.createElement(v.Button,{small:!0,rounded:!0,style:re.buttonStyle,onClick:e.onGoToWorkspace},r.a.createElement(v.Text,null,e.treedataLen||0),r.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"import"}))))}function Z(e){var t=e.whereFilter,n=e.filter;n.where=t,console.log("!!!!!!!! SearchListPClasses !!!!!!!");var a=q(n,"pclass"),o=a.data,i=a.error,c=$(n,"pclass").data,l=c?c.count:0;if(i)return r.a.createElement("div",null,"failed to load");if(!o)return r.a.createElement("div",null,"loading...");console.log("data",o),console.log("count",l);var s={header:[{callback:e.onInfo,icon:{type:"FontAwesome",name:"info"}},{callback:e.onSelect,icon:{type:"MaterialCommunityIcons",name:"import"}}],contentItem:[{callback:e.onPfunctionRun,icon:{type:"MaterialCommunityIcons",name:"play"}}]};return r.a.createElement(Y,{data:o,resultsCount:l,filter:n,styles:e.styles,buttons:s,onGoToSearch:e.onGoToSearch,onPreviousPage:e.onPreviousPage,onAddListPage:e.onAddListPage,onGoToWorkspace:e.onGoToWorkspace,treedataLen:e.treedataLen})}function ee(e){var t=e.whereFilter,n=e.filter;n.where=t,console.log("!!!!!!!! SearchListPClassesByPclassi !!!!!!!",JSON.stringify(n));var a=q(n,"pclassi"),o=a.data,i=a.error,c=$(n,"pclassi").data,l=c?c.count:0;if(i)return r.a.createElement("div",null,"failed to load");if(!o)return r.a.createElement("div",null,"loading...");var s=o.map((function(e){var t=e.pclass;return t.pclassInstances=[e],t}));console.log("data",s),console.log("count",l);var u={header:[{callback:e.onInfo,icon:{type:"FontAwesome",name:"info"}},{callback:e.onSelect,icon:{type:"MaterialCommunityIcons",name:"import"}}],contentItem:[{callback:e.onPfunctionRun,icon:{type:"MaterialCommunityIcons",name:"play"}}]};return r.a.createElement(Y,{data:s,resultsCount:l,filter:n,styles:e.styles,buttons:u,onGoToSearch:e.onGoToSearch,onPreviousPage:e.onPreviousPage,onAddListPage:e.onAddListPage,onGoToWorkspace:e.onGoToWorkspace,treedataLen:e.treedataLen})}function te(e){var t=e.whereFilter,n=e.filter;n.where=t,n.limit=300,console.log("!!!!!!!! SearchListPfunctions !!!!!!!");var a=q(n,"pfunction"),o=a.data,i=a.error,c=$(n,"pfunction").data,l=c?c.count:0;if(i)return console.error(i),r.a.createElement("div",null,"failed to load");if(o instanceof Object&&o.error)return console.error(o.error),r.a.createElement("div",null,"failed to load");if(!o)return r.a.createElement("div",null,"loading...");var s={},u=[];(o||[]).forEach((function(e){var t=e.pclass;console.log("pclass._id",t._id,s[t._id]),s[t._id]||0===s[t._id]?u[s[t._id]].pfunctions.push(e):(t.pfunctions=[e],s[t._id]=u.length,u.push(t))})),console.log("data",u.length,u.slice(0,3)),console.log("count",l);var d={header:[{callback:e.onInfo,icon:{type:"FontAwesome",name:"info"}},{callback:e.onSelect,icon:{type:"MaterialCommunityIcons",name:"import"}}],contentItem:[{callback:e.onPfunctionRun,icon:{type:"MaterialCommunityIcons",name:"play"}}]};return r.a.createElement(Y,{data:u,resultsCount:l,filter:n,styles:e.styles,buttons:d,onGoToSearch:e.onGoToSearch,onPreviousPage:e.onPreviousPage,onAddListPage:e.onAddListPage,onGoToWorkspace:e.onGoToWorkspace,treedataLen:e.treedataLen})}function ne(e){var t=e.whereFilter,n=e.filter;n.where=t,console.log("!!!!!!!! SearchListdTypes !!!!!!!");var a=q(n,"dtype"),o=a.data,i=a.error,c=$(n,"dtype").data,l=c?c.count:0;if(i)return r.a.createElement("div",null,"failed to load");if(!o)return r.a.createElement("div",null,"loading...");console.log("dtype data",o),console.log("dtype count",l),o=o.map((function(e){var t=JSON.parse(JSON.stringify(e));return t.data.abstractIdentifier||(t.data.name="* "+t.data.name),t}));var s={header:[{callback:e.onAddType,icon:{type:"FontAwesome",name:"plus"}},{callback:e.onAddValue,icon:{type:"MaterialCommunityIcons",name:"database-plus"}},{callback:e.onShowValues,icon:{type:"MaterialCommunityIcons",name:"database"}},{callback:e.onInfo,icon:{type:"FontAwesome",name:"info"}},{callback:e.onSelect,icon:{type:"MaterialCommunityIcons",name:"import"}}],contentItem:[{callback:e.onPfunctionRun,icon:{type:"MaterialCommunityIcons",name:"play"}}]};return r.a.createElement(Y,{data:o,resultsCount:l,filter:n,styles:e.styles,buttons:s,onGoToSearch:e.onGoToSearch,onPreviousPage:e.onPreviousPage,onAddListPage:e.onAddListPage,onGoToWorkspace:e.onGoToWorkspace,treedataLen:e.treedataLen})}function ae(e){var t=e.whereFilter,n=e.filter;n.where=t,delete n.include,console.log("!!!!!!!! SearchListdTypeValues !!!!!!!");var a=q(n,"dtypei"),o=a.data,i=a.error,c=$(n,"dtypei").data,l=c?c.count:0;if(i)return r.a.createElement("div",null,"failed to load");if(!o)return r.a.createElement("div",null,"loading...");console.log("dtypei data",o),console.log("dtypei count",l),o=o.map((function(e){var t=JSON.parse(JSON.stringify(e));return t.data=t,t.data.name=t.dtype_name+": "+t.value,t}));var s={header:[{callback:e.onSelect,icon:{type:"MaterialCommunityIcons",name:"import"}}]};return r.a.createElement(Y,{data:o,resultsCount:l,filter:n,styles:e.styles,buttons:s,onGoToSearch:e.onGoToSearch,onPreviousPage:e.onPreviousPage,onAddListPage:e.onAddListPage,onGoToWorkspace:e.onGoToWorkspace,treedataLen:e.treedataLen})}var re=b.a.create({buttonStyle:{backgroundColor:"#cccccc"}}),oe=n(69),ie=function(){var e=Object(s.a)(l.a.mark((function e(){var t,n,a,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:"ropsten",!window.ethereum){e.next=15;break}return e.prev=2,e.next=5,window.ethereum.enable();case 5:n=new oe.ethers.providers.Web3Provider(window.ethereum),a=n.getSigner(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("User rejected dApp connection"),n=oe.ethers.getDefaultProvider(t);case 13:e.next=17;break;case 15:console.log("Non-Ethereum browser detected. Consider trying MetaMask!"),n=oe.ethers.getDefaultProvider(t);case 17:return window.provider=n,e.abrupt("return",{provider:n,signer:a});case 19:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),ce={1:"mainnet",3:"ropsten",4:"rinkeby",5:"goerli",42:"kovan"},le=function(e){var t=ce[e];return 1===e?t="":t+=".","https://".concat(t,"etherscan.io")},se=function(e,t){return"".concat(le(e),"/tx/").concat(t)},ue={name:"receipt",type:"tuple",components:[{name:"etherscan",type:"link"},{name:"hash",type:"string"},{name:"blockHash",type:"string"},{name:"blockNumber",type:"uint256"},{name:"confirmations",type:"uint256"}]},de={name:"receipt",type:"tuple",components:[{name:"etherscan",type:"link"},{name:"transactionHash",type:"string"},{name:"blockHash",type:"string"},{name:"blockNumber",type:"uint256"},{name:"confirmations",type:"uint256"}]};function pe(e){var t=e.pclass,n=t.data,a={minWidth:e.styles.minWidth-40,minHeight:150},o=(t.pclassInstances||[]).map((function(e){var t,n,o=e.data.deployment,i=(t=o.chainid,n=o.address,"".concat(le(t),"/address/").concat(n,"#code"));return r.a.createElement(v.View,{key:e._id,style:{flexDirection:"column"}},r.a.createElement(v.View,null,r.a.createElement(v.Text,{accessibilityRole:"link",href:i,style:{color:"blue"},target:"_blank"},i)),r.a.createElement(v.View,{style:{flexDirection:"row",alignItems:"center"}},r.a.createElement(v.Button,{transparent:!0,small:!0,onClick:function(){return W(o.chainid)}},r.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"content-copy",style:me.clipboardBtn})),r.a.createElement(v.Text,{style:me.deploymentField},"Chain ID: "),r.a.createElement(v.Text,{style:me.deploymentValues}," ",o.chainid)),r.a.createElement(v.View,{style:{flexDirection:"row",alignItems:"center"}},r.a.createElement(v.Button,{transparent:!0,small:!0,onClick:function(){return W(o.block)}},r.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"content-copy",style:me.clipboardBtn})),r.a.createElement(v.Text,{style:me.deploymentField},"Block: "),r.a.createElement(v.Text,{style:me.deploymentValues}," ",o.block)),r.a.createElement(v.View,{style:{flexDirection:"column"}},r.a.createElement(v.View,{style:{flexDirection:"row",alignItems:"center"}},r.a.createElement(v.Button,{transparent:!0,small:!0,onClick:function(){return W(o.address)}},r.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"content-copy",style:me.clipboardBtn})),r.a.createElement(v.Text,{style:me.deploymentField},"Address: ")),r.a.createElement(v.Textarea,{style:Object(u.a)(Object(u.a)({},a),{},{height:40,minHeight:40}),disabled:!0,bordered:!0,value:o.address})),r.a.createElement(v.View,{style:{flexDirection:"column"}},r.a.createElement(v.View,{style:{flexDirection:"row",alignItems:"center"}},r.a.createElement(v.Button,{transparent:!0,small:!0,onClick:function(){return W(o.txhash)}},r.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"content-copy",style:me.clipboardBtn})),r.a.createElement(v.Text,{style:me.deploymentField},"Transaction Hash: ")),r.a.createElement(v.Textarea,{style:Object(u.a)(Object(u.a)({},a),{},{height:40,minHeight:40}),disabled:!0,bordered:!0,value:o.txhash})),o.constructorArgs?r.a.createElement(v.View,{style:{flexDirection:"column"}},r.a.createElement(v.View,{style:{flexDirection:"row",alignItems:"center"}},r.a.createElement(v.Button,{transparent:!0,small:!0,onClick:function(){return W(o.constructorArgs)}},r.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"content-copy",style:me.clipboardBtn})),r.a.createElement(v.Text,{style:me.deploymentField},"Constructor Arguments: ")),r.a.createElement(v.Textarea,{style:Object(u.a)(Object(u.a)({},a),{},{minHeight:60}),disabled:!0,bordered:!0,value:o.constructorArgs})):r.a.createElement(r.a.Fragment,null))}));return r.a.createElement(v.View,{style:Object(u.a)(Object(u.a)({},e.styles),{},{flex:1,width:e.styles.minWidth})},r.a.createElement(v.CardItem,{header:!0},r.a.createElement(v.H1,null,n.name)),r.a.createElement(v.Content,null,r.a.createElement(v.Card,null,r.a.createElement(v.CardItem,{header:!0},r.a.createElement(v.H3,null,"Deployment:")),r.a.createElement(v.CardItem,null,r.a.createElement(v.Body,null,o)),r.a.createElement(v.CardItem,null,r.a.createElement(v.Body,null,r.a.createElement(v.View,{style:{flexDirection:"row",alignItems:"center"}},r.a.createElement(v.Button,{transparent:!0,small:!0,onClick:function(){return W(JSON.stringify(n.gapi))}},r.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"content-copy",style:me.clipboardBtn})),r.a.createElement(v.H3,null,"ABI")),r.a.createElement(v.Textarea,{style:a,disabled:!0,bordered:!0,value:JSON.stringify(n.gapi)}))),r.a.createElement(v.CardItem,null,r.a.createElement(v.Body,null,r.a.createElement(v.View,{style:{flexDirection:"row",alignItems:"center"}},r.a.createElement(v.Button,{transparent:!0,small:!0,onClick:function(){return W(JSON.stringify(n.natspec))}},r.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"content-copy",style:me.clipboardBtn})),r.a.createElement(v.H3,null,"Natspec")),r.a.createElement(v.Textarea,{style:a,disabled:!0,bordered:!0,value:JSON.stringify(n.natspec)}))),r.a.createElement(v.CardItem,null,r.a.createElement(v.Body,null,r.a.createElement(v.View,{style:{flexDirection:"row",alignItems:"center"}},r.a.createElement(v.Button,{transparent:!0,small:!0,onClick:function(){return W(JSON.stringify(n.sourceByLanguage[0].compiler))}},r.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"content-copy",style:me.clipboardBtn})),r.a.createElement(v.H3,null,"Compiler")),r.a.createElement(v.Textarea,{style:a,disabled:!0,bordered:!0,value:JSON.stringify(n.sourceByLanguage[0].compiler)}))),r.a.createElement(v.CardItem,null,r.a.createElement(v.Body,null,r.a.createElement(v.View,{style:{flexDirection:"row",alignItems:"center"}},r.a.createElement(v.Button,{transparent:!0,small:!0,onClick:function(){return W(n.sourceByLanguage[0].compilerOutput.runtime.bytecode)}},r.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"content-copy",style:me.clipboardBtn})),r.a.createElement(v.H3,null,"Runtime Bytecode")),r.a.createElement(v.Textarea,{style:a,disabled:!0,bordered:!0,value:n.sourceByLanguage[0].compilerOutput.runtime.bytecode}))))),r.a.createElement(v.View,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:5,borderTopWidth:1,borderTopColor:"#cccccc"}},r.a.createElement(v.Left,null,r.a.createElement(v.Button,{small:!0,rounded:!0,style:me.buttonStyle,onClick:e.onInfoClosed},r.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"close"})))))}var me=b.a.create({deploymentField:{fontWeight:600},deploymentValues:{fontFamily:"monospace"},buttonStyle:{backgroundColor:"#cccccc",marginRight:15},clipboardBtn:{color:"#000000"}}),he=n(35),ye=["int","float","tuple","boolean"],fe=function(e){return e||""},ge=function(e){return e||""},be=function(e){return e?JSON.parse(e):null},ve=function(e){return e?JSON.stringify(e):""};function Ee(e){var t,n,a,o=e.item;return(t=o.type,ye.find((function(e){return t.includes(e)})))?(n=be,a=ve):(n=fe,a=ge),console.log("encodeValue",a(e.value)),"link"===o.type?r.a.createElement(v.Text,{accessibilityRole:"link",href:e.value,style:{color:"blue"},target:"_blank"},e.value):r.a.createElement(v.Input,{value:a(e.value),onChangeText:function(t){return e.onValueChange(n(t))},styles:e.styles,disabled:e.readonly})}var Ce=function(e){Object(h.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={componentsOpened:!1,componentValues:e.value},a.onComponentsValueChange=a.onComponentsValueChange.bind(Object(m.a)(a)),a.onOpenComponents=a.onOpenComponents.bind(Object(m.a)(a)),a._renderHeader=a._renderHeader.bind(Object(m.a)(a)),a._renderContent=a._renderContent.bind(Object(m.a)(a)),a}return Object(p.a)(n,[{key:"getLabel",value:function(e){return e.label||"".concat(e.name,":").concat(e.type)}},{key:"onOpenComponents",value:function(){console.log("onOpenComponents"),this.setState({componentsOpened:!0})}},{key:"onComponentsValueChange",value:function(e,t){console.log("IoGapi onComponentsValueChange",e,t);var n=this.state.componentValues;n[t]=e,this.setState({componentValues:n}),this.props.onValueChange(n)}},{key:"_renderHeader",value:function(e,t){var n=this.getLabel(e);return r.a.createElement(v.View,{style:Object(u.a)({padding:5,flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"#fafafa"},this.props.styles)},r.a.createElement(v.View,{style:Object(u.a)(Object(u.a)({},this.props.styles),{},{flexDirection:"row"})},t?r.a.createElement(v.Icon,{style:{fontSize:18},name:"remove-circle"}):r.a.createElement(v.Icon,{style:{fontSize:18},name:"add-circle"}),r.a.createElement(v.Item,{stackedLabel:!0,style:Object(u.a)(Object(u.a)({},this.props.styles),{},{maxWidth:this.props.styles.minWidth})},r.a.createElement(v.Label,null,n),r.a.createElement(Ee,{item:e,value:this.props.value,onValueChange:this.props.onValueChange,styles:this.props.styles,readonly:this.props.readonly}))))}},{key:"_renderContent",value:function(e){var t=this;return(e.components||[]).map((function(e,a){return r.a.createElement(n,{key:a,styles:t.props.styles,item:e,value:t.props.value[a],onValueChange:function(e){return t.onComponentsValueChange(e,a)},readonly:t.props.readonly})}))}},{key:"render",value:function(){var e=this.props,t=e.item,n=e.styles,a=e.readonly;if(!t)return r.a.createElement(v.Text,null,"---");var o=this.getLabel(t);return r.a.createElement(v.View,{style:Object(u.a)(Object(u.a)({},n),{},{flexDirection:"row",alignItems:"center"})},t.components&&0!==t.components.length?r.a.createElement(v.Accordion,{dataArray:[t],expanded:0,renderHeader:this._renderHeader,renderContent:this._renderContent,contentStyle:Object(u.a)(Object(u.a)({},n),{},{flex:1,backgroundColor:"#ffffff"})}):r.a.createElement(v.Item,{stackedLabel:!0,style:{width:"100%"}},r.a.createElement(v.Label,null,o),r.a.createElement(Ee,{styles:n,item:t,value:this.props.value,onValueChange:this.props.onValueChange,readonly:a})))}}]),n}(a.Component);var ke=function(e){Object(h.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={inputs:a.initInputsState(),outputs:a.initOutputsState()},a.onValueChange=a.onValueChange.bind(Object(m.a)(a)),a.onRun=a.onRun.bind(Object(m.a)(a)),a}return Object(p.a)(n,[{key:"initInputsState",value:function(){var e=this.props.item.pfunction,t=this.ioGapiInputs(e);return t&&t.components?new Array(t.components.length):[]}},{key:"initOutputsState",value:function(){var e=this.props.item.pfunction;return function e(t){if(!t||!t.components)return[];var n=new Array(t.components.length);return t.components.forEach((function(t,a){t.components&&(n[a]=e(t))})),n}(this.ioGapiOutputs(e))}},{key:"typesig",value:function(e){var t="";return e.name&&(t+="".concat(e.name,":")),t+=e.type}},{key:"ioGapiInputs",value:function(e){var t=this,n="(".concat(e.data.gapi.inputs.map((function(e){return t.typesig(e)})).join(","),")");return e.data.gapi.inputs.length>0?{name:e.data.signatureString,type:"tuple",components:e.data.gapi.inputs,label:n}:null}},{key:"ioGapiOutputs",value:function(e){var t=this,n=JSON.parse(JSON.stringify(e.data.gapi.outputs||[])),a="(".concat(n.map((function(e){return t.typesig(e)})).join(","),")");return"payable"!==e.data.gapi.stateMutability&&"nonpayable"!==e.data.gapi.stateMutability||(n=ue.components,a="receipt(".concat(n.map((function(e){return t.typesig(e)})).join(","),")")),n.length>0?{name:e.data.signatureString,type:"tuple",components:n,label:a}:null}},{key:"onValueChange",value:function(e){console.log("--- onValueChange",e),this.setState({inputs:e})}},{key:"onRun",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t,n,a,r,o,i,c,s,u,d,p,m,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.item,n=t.pclass,a=t.pfunction,r=n.pclassInstances,e.next=4,ie();case 4:return o=e.sent,i=o.provider,c=o.signer,e.next=9,i.getNetwork();case 9:if(s=e.sent.chainId,console.log("this.state.inputs",this.state.inputs),u=r.find((function(e){return e.data.deployment.chainid===s||e.data.deployment.chainid===parseInt(s)})),!this.props.onRun){e.next=18;break}return e.next=15,this.props.onRun(oe.ethers,i,c,u.data.deployment.address,a,this.state.inputs);case 15:d=e.sent,e.next=22;break;case 18:return p=new oe.ethers.Contract(u.data.deployment.address,n.data.gapi,c),e.next=21,p[a.data.name].apply(p,Object(he.a)(this.state.inputs).concat([{gasPrice:21e9,gasLimit:1e6}]));case 21:d=e.sent;case 22:if(d){e.next=24;break}return e.abrupt("return");case 24:if(console.log("result",d),m=d instanceof Array?d:[d],"payable"!==a.data.gapi.stateMutability&&"nonpayable"!==a.data.gapi.stateMutability){e.next=34;break}return m=ue.components.map((function(e){return"etherscan"===e.name?se(u.data.deployment.chainid,d.hash):d[e.name]?d[e.name]:"waiting"})),this.setState({outputs:m}),e.next=31,d.wait(2);case 31:h=e.sent,console.log("receipt",h),m=de.components.map((function(e){return"etherscan"===e.name?se(u.data.deployment.chainid,h.transactionHash):h[e.name]}));case 34:this.setState({outputs:m}),this.props.onAfterRun&&this.props.onAfterRun();case 36:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.item.pfunction,t=this.props.styles.minWidth-40,n={minWidth:t,width:t},a=this.ioGapiInputs(e),o=this.ioGapiOutputs(e);return r.a.createElement(v.View,{style:Object(u.a)(Object(u.a)({},this.props.styles),{},{flex:1,width:this.props.styles.minWidth})},r.a.createElement(v.CardItem,{style:{backgroundColor:L(e.data.gapi)}},r.a.createElement(v.View,{style:{flexDirection:"row",alignItems:"center"}},r.a.createElement(v.H1,{style:{paddingRight:20}},e.data.name))),r.a.createElement(v.Content,null,r.a.createElement(v.Card,null,r.a.createElement(v.CardItem,{header:!0},r.a.createElement(v.Text,null,"Inputs")),r.a.createElement(v.CardItem,null,r.a.createElement(Ce,{item:a,value:this.state.inputs,onValueChange:this.onValueChange,styles:n})),r.a.createElement(v.CardItem,{header:!0},r.a.createElement(v.Text,null,"Outputs")),r.a.createElement(v.CardItem,null,r.a.createElement(Ce,{item:o,readonly:!0,value:this.state.outputs,styles:n})))),r.a.createElement(v.View,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:5,borderTopWidth:1,borderTopColor:"#cccccc"}},r.a.createElement(v.Left,null,r.a.createElement(v.Button,{small:!0,rounded:!0,style:we.buttonStyle,onClick:this.props.onInfoClosed},r.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"close"}))),r.a.createElement(v.Right,null,r.a.createElement(v.Button,{small:!0,rounded:!0,style:we.buttonStyle,onClick:this.onRun},r.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"play"})))))}}]),n}(a.Component),we=b.a.create({buttonStyle:{backgroundColor:"#cccccc"}}),Oe=function(e){var t={},n={},a={},r={};if(!e.text)return{pclassWhere:t,pfunctionWhere:n,pclassiWhere:a};switch(console.log("genQuery",e),e.field){case"name":t["data.name"]={like:e.text,options:"i"},n["data.name"]={like:e.text,options:"i"};break;case"address":a["data.deployment.address"]=e.text;break;case"signature":n["data.signature"]=e.text;break;case"dtype":r["data.identifier"]=e.text;break;default:console.error("Invalid search parameters: ",e)}return console.log("buildWhereQueries dtypeWhere",JSON.stringify(r)),{pclassWhere:t,pfunctionWhere:n,pclassiWhere:a,dtypeWhere:r}},Ie=function(e,t){return e.toString(16).padStart(t,"0")},xe=function(){var e=Object(s.a)(l.a.mark((function e(t,n){var a,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("encodeTypeData",t,n),a=t.substring(0,2),console.log("abstractType",a),r=parseInt("0x"+t.substring(2)),console.log("size",r),e.t0=a,e.next="44"===e.t0?8:"ee"===e.t0?9:"11"===e.t0?10:"22"===e.t0?11:12;break;case 8:return e.abrupt("return",t.substring(0,8)+Ie(t.substring(8),n));case 9:return e.abrupt("break",20);case 10:case 11:return e.abrupt("return",t+Ie(n,2*r));case 12:return e.next=14,Se(t);case 14:if((o=e.sent)&&0!==o.length){e.next=17;break}return e.abrupt("return",null);case 17:return e.next=19,xe(o[0].data.abstractIdentifier,n);case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Se=function(){var e=Object(s.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={where:{"data.identifier":t}},e.next=3,fetch(M+"?filter="+JSON.stringify(n));case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Te(e,t){var n=t.width,a=t.height;return console.log("--dimensions",e,{width:n,height:a}),n<800?{minWidth:n,minHeight:a}:{minWidth:n/e,minHeight:a}}var je=function(e){Object(h.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).DEFAULT_FILTER={skip:0,limit:30},a.PAGE_NUMBER=3,a.state=Object(u.a)(Object(u.a)({},a.getWindowDimensions()),{},{pclassWhere:{},pfunctionWhere:{},pclassiWhere:{},dtypeWhere:{},dtypeiWhere:{},filter:Object.assign({},a.DEFAULT_FILTER),treedata:[],showPclassInfo:null,runPfunction:null,chainid:null,currentNamedType:null,currentTypeValue:null,dtypeAdd:null,dtypeiShow:null}),a.scrollRef=r.a.createRef(),a.onContentSizeChange=a.onContentSizeChange.bind(Object(m.a)(a)),a.onQueryChange=a.onQueryChange.bind(Object(m.a)(a)),a.onAddListPage=a.onAddListPage.bind(Object(m.a)(a)),a.onPreviousPage=a.onPreviousPage.bind(Object(m.a)(a)),a.onWorkspaceAddItem=a.onWorkspaceAddItem.bind(Object(m.a)(a)),a.onGoToSearch=a.onGoToSearch.bind(Object(m.a)(a)),a.onGoToWorkspace=a.onGoToWorkspace.bind(Object(m.a)(a)),a.onGoToSearchList=a.onGoToSearchList.bind(Object(m.a)(a)),a.onInfo=a.onInfo.bind(Object(m.a)(a)),a.onInfoClosed=a.onInfoClosed.bind(Object(m.a)(a)),a.onPfunctionRun=a.onPfunctionRun.bind(Object(m.a)(a)),a.onWorkspaceRemoveItem=a.onWorkspaceRemoveItem.bind(Object(m.a)(a)),a.onAddType=a.onAddType.bind(Object(m.a)(a)),a.onRundType=a.onRundType.bind(Object(m.a)(a)),a.onAfterRunType=a.onAfterRunType.bind(Object(m.a)(a)),a.onAddValue=a.onAddValue.bind(Object(m.a)(a)),a.onAddValueRun=a.onAddValueRun.bind(Object(m.a)(a)),a.onAfterRunValue=a.onAfterRunValue.bind(Object(m.a)(a)),a.onShowValues=a.onShowValues.bind(Object(m.a)(a)),f.a.addEventListener("change",(function(){a.onContentSizeChange()})),a.setWeb3(),a}return Object(p.a)(n,[{key:"setWeb3",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie();case 2:return this.web3=e.sent,e.next=5,this.web3.provider.getNetwork();case 5:t=e.sent,this.setState({chainid:parseInt(t.chainId)});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWindowDimensions",value:function(){var e=f.a.get("window"),t=document.getElementById("ChainLensRoot").getBoundingClientRect();return{width:e.width||t.width,height:e.height||t.height}}},{key:"onContentSizeChange",value:function(){this.setState(this.getWindowDimensions())}},{key:"onWorkspaceAddItem",value:function(e){var t=this.state.treedata;t.push(e),this.setState({treedata:t})}},{key:"onWorkspaceRemoveItem",value:function(e){var t=this.state.treedata,n=t.findIndex((function(t){return t._id===e._id}));t.splice(n,1),this.setState({treedata:t})}},{key:"onQueryChange",value:function(e){var t=e.genQuery,n=e.fxQuery,a=e.dtQuery,r={},o={},i={},c={};if(t.valid){var l=Oe(t);r=l.pclassWhere,o=l.pfunctionWhere,i=l.pclassiWhere}a.valid&&(c=Oe(a).dtypeWhere);n.valid&&(o=Object(u.a)(Object(u.a)({},o),function(e){var t={};return e.text?(t["data.gapi.".concat(e.field)]={inq:[{type:e.text}]},t):t}(n))),console.log("pclassiWhere",JSON.stringify(i)),console.log("pclassWhere",JSON.stringify(r)),console.log("pfunctionWhere",JSON.stringify(o)),console.log("dtypeWhere",JSON.stringify(c));var s=JSON.stringify(r)!==JSON.stringify(this.state.pclassWhere)||JSON.stringify(o)!==JSON.stringify(this.state.pfunctionWhere)||JSON.stringify(i)!==JSON.stringify(this.state.pclassiWhere)||JSON.stringify(c)!==JSON.stringify(this.state.dtypeWhere);if(console.log("isChanged",s),s){var d=Object.assign({},this.DEFAULT_FILTER);this.setState({pclassWhere:r,pfunctionWhere:o,pclassiWhere:i,dtypeWhere:c,filter:d})}this.onGoToSearchList()}},{key:"onAddListPage",value:function(){var e=this.state.filter;e.skip+=30,this.setState({filter:e})}},{key:"onPreviousPage",value:function(){var e=this.state.filter;e.skip-=30,this.setState({filter:e})}},{key:"onGoToSearchList",value:function(){var e=this.state,t=e.width,n=e.height,a=Te(this.PAGE_NUMBER,{width:t,height:n});this.scrollRef.current.scrollTo({x:a.minWidth,y:0,animated:!0})}},{key:"onGoToSearch",value:function(){this.scrollRef.current.scrollTo({x:0,y:0,animated:!0})}},{key:"onGoToWorkspace",value:function(){this.scrollRef.current.scrollToEnd()}},{key:"onInfo",value:function(e){this.setState({showPclassInfo:e,runPfunction:null,dtypeiShow:null}),this.onGoToWorkspace()}},{key:"onInfoClosed",value:function(){this.setState({showPclassInfo:null,runPfunction:null,dtypeiShow:null}),this.onGoToSearchList()}},{key:"onPfunctionRun",value:function(e){this.setState({runPfunction:e,showPclassInfo:null,dtypeiShow:null}),this.onGoToWorkspace()}},{key:"onAddType",value:function(e){console.log("onAddType",e);var t={pfunction:{_id:e._id,data:{name:e.data.name,signature:e.data.identifier,gapi:{name:e.data.name,inputs:e.data.inputArgs.concat({name:"name",type:"string"}),outputs:[],stateMutability:"nonpayable"}}},pclass:{data:{name:"dTypeInterpreter",gapi:[]},pclassInstances:[{data:{deployment:{chainid:3,address:"0x4FDC110B666f4f1AECb12df272C964b34B28Db05"}}}]}};console.log("onAddType pfunc",t),this.setState({dtypeAdd:1}),this.onPfunctionRun(t)}},{key:"onRundType",value:function(){var e=Object(s.a)(l.a.mark((function e(t,n,a,r,o,i){var c,s,u,d,p,m,h,y;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onRundType",r,o,i),c=i[o.data.gapi.inputs.findIndex((function(e){return"name"===e.name}))],s=i[o.data.gapi.inputs.findIndex((function(e){return"size"===e.name}))],console.log("size",s),u=t.utils.id(c).slice(2,10),d=o.data.signature,0===parseInt(d.slice(2))&&(d=d.slice(0,2)+Ie(parseInt(s),6)),console.log("abstractTypeId",d),p=o.data.gapi.inputs.filter((function(e){return"name"!==e.name})).map((function(e,t){var n=parseInt(e.type.substring(2),16);return e.type+Ie(parseInt(i[t]),2*n)})),m="ee"+Ie(o.data.gapi.inputs.length,6)+p.map((function(e){return Ie(e.length/2,8)})).join("")+p.join(""),h="0xfffffffc"+u+"ee00000200000004"+Ie(m.length/2+4,8)+d+m,y={to:r,value:0,data:h,gasPrice:21e9},e.next=14,n.estimateGas(y);case 14:return e.t0=e.sent.toNumber(),y.gasLimit=e.t0+2e5,console.log("transaction",y),this.setState({currentNamedType:{data:{name:c,identifier:u,abstractIdentifier:d,input:h,inputArgs:[]},metadata:{chainids:[3]},timestamp:new Date}}),e.abrupt("return",a.sendTransaction(y));case 19:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r,o,i){return e.apply(this,arguments)}}()},{key:"onAfterRunType",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t,n,a,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.currentNamedType,e.next=3,K(t);case 3:n=e.sent,console.log("saved named type",n),a=this.state,r=a.filter,o=a.dtypeWhere,r.where=o,console.log("filter",r),Object(N.b)(Q(r,"dtype")),Object(N.b)(H(r,"dtype"));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onAddValue",value:function(){var e=Object(s.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("onAddValue",t),n={_id:t._id,data:{name:t.data.name,signature:t.data.identifier,gapi:{name:t.data.name,inputs:[{name:"value",type:t.data.name}],outputs:[],stateMutability:"nonpayable"}}},a={pfunction:n,pclass:{data:{name:"dTypeInterpreter",gapi:[]},pclassInstances:[{data:{deployment:{chainid:3,address:"0x4FDC110B666f4f1AECb12df272C964b34B28Db05"}}}]}},console.log("onAddType pfunc",a),this.setState({dtypeAdd:2}),this.onPfunctionRun(a);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onAddValueRun",value:function(){var e=Object(s.a)(l.a.mark((function e(t,n,a,r,o,i){var c,s,u,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onAddValueRun item",o,i),e.next=3,xe(o.data.signature,i);case 3:return c=e.sent,s="0xffffffff33333326ee000001"+Ie(c.length/2,8)+c,u={to:r,value:0,data:s,gasPrice:21e9},console.log("transaction",u),e.next=9,n.estimateGas(u);case 9:return e.t0=e.sent.toNumber(),u.gasLimit=e.t0+2e5,console.log("transaction",u),e.next=14,n.call({to:r,data:"0xffffffff33333324ee0000010000000811000004"+o.data.signature});case 14:return d=e.sent,console.log("count",d,d.slice(26)),this.setState({currentTypeValue:{dtype_id:o._id,dtype_identifier:o.data.signature,dtype_name:o.data.name,value:i.toString(),valueHex:c,index:parseInt("0x"+d.slice(26))}}),e.abrupt("return",a.sendTransaction(u));case 18:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r,o,i){return e.apply(this,arguments)}}()},{key:"onAfterRunValue",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t,n,a,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onAfterRunValue"),t=this.state.currentTypeValue,e.next=4,X(t);case 4:n=e.sent,console.log("saved type value",n),a=this.state,r=a.filter,o=a.dtypeWhere,r.where=o,console.log("filter",r),Object(N.b)(Q(r,"dtypei")),Object(N.b)(H(r,"dtypei"));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onShowValues",value:function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("onShowValues",t),n={dtype_id:t._id},this.setState({dtypeiWhere:n,dtypeiShow:!0});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.width,n=e.height,a=e.treedata,o=e.showPclassInfo,i=e.runPfunction,c=e.pclassWhere,l=e.pfunctionWhere,s=e.pclassiWhere,u=e.dtypeWhere,d=void 0===u?{}:u,p=e.dtypeiWhere,m=e.filter,h=e.chainid,y=e.dtypeAdd,f=e.dtypeiShow,b=Te(this.PAGE_NUMBER,{width:t,height:n}),v={pclassWhere:c,pfunctionWhere:l,pclassiWhere:s,dtypeWhere:d,dtypeiWhere:p},E=Object.keys(l)[0]||"",C=E.includes("data.gapi")||E.includes("data.signature"),k=(Object.keys(s)[0]||"").includes("address"),O=Object.keys(d||{}).length>0;return h&&(c["metadata.chainids"]={inq:[h]},l["metadata.chainids"]={inq:[h]},s["data.deployment.chainid"]=h,d["metadata.chainids"]={inq:[h]}),r.a.createElement(g.a,{ref:this.scrollRef,horizontal:!0,pagingEnabled:!0,scrollEnabled:!0,scrollEventThrottle:100,nestedScrollEnabled:!0,contentContainerStyle:{width:"100%"},onContentSizeChange:this.onContentSizeChange},r.a.createElement(w,{styles:b,chain:{id:h,name:ce[h]},onQueryChange:this.onQueryChange}),C?r.a.createElement(te,{whereFilters:v,whereFilter:l,filter:m,styles:b,treedataLen:a.length,onAddListPage:this.onAddListPage,onPreviousPage:this.onPreviousPage,onSelect:this.onWorkspaceAddItem,onGoToSearch:this.onGoToSearch,onGoToWorkspace:this.onGoToWorkspace,onInfo:this.onInfo,onPfunctionRun:this.onPfunctionRun}):k?r.a.createElement(ee,{whereFilters:v,whereFilter:s,filter:m,styles:b,treedataLen:a.length,onAddListPage:this.onAddListPage,onPreviousPage:this.onPreviousPage,onSelect:this.onWorkspaceAddItem,onGoToSearch:this.onGoToSearch,onGoToWorkspace:this.onGoToWorkspace,onInfo:this.onInfo,onPfunctionRun:this.onPfunctionRun}):O?r.a.createElement(ne,{whereFilters:v,whereFilter:d,filter:m,styles:b,treedataLen:a.length,onAddListPage:this.onAddListPage,onPreviousPage:this.onPreviousPage,onSelect:this.onWorkspaceAddItem,onGoToSearch:this.onGoToSearch,onGoToWorkspace:this.onGoToWorkspace,onInfo:this.onInfo,onAddType:this.onAddType,onAddValue:this.onAddValue,onShowValues:this.onShowValues,onPfunctionRun:this.onPfunctionRun}):r.a.createElement(Z,{whereFilters:v,whereFilter:c,filter:m,styles:b,treedataLen:a.length,onAddListPage:this.onAddListPage,onPreviousPage:this.onPreviousPage,onSelect:this.onWorkspaceAddItem,onGoToSearch:this.onGoToSearch,onGoToWorkspace:this.onGoToWorkspace,onInfo:this.onInfo,onPfunctionRun:this.onPfunctionRun}),o?r.a.createElement(pe,{styles:b,pclass:o,onInfoClosed:this.onInfoClosed}):i?r.a.createElement(ke,{key:i.pfunction._id,styles:b,item:i,onInfoClosed:this.onInfoClosed,onRun:O?1===y?this.onRundType:this.onAddValueRun:null,onAfterRun:O?1===y?this.onAfterRunType:this.onAfterRunValue:null}):f?r.a.createElement(ae,{whereFilters:v,whereFilter:p,filter:m,styles:b,treedataLen:a.length,onAddListPage:this.onAddListPage,onPreviousPage:this.onPreviousPage,onSelect:this.onWorkspaceAddItem,onGoToSearch:this.onInfoClosed,onGoToWorkspace:this.onGoToWorkspace}):r.a.createElement(G,{treedata:a,styles:b,onGoToSearchList:this.onGoToSearchList,onRemove:this.onWorkspaceRemoveItem}))}}]),n}(a.Component);var Pe=function(){return r.a.createElement(v.Container,{style:We.container},r.a.createElement(je,null))},We=b.a.create({buttonStyle:{backgroundColor:"#cccccc"},container:{width:"100%",height:"100%"}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Pe,null),document.getElementById("ChainLensRoot")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[271,1,2]]]);
//# sourceMappingURL=main.66816737.chunk.js.map