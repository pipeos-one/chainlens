{"version":3,"sources":["components/SearchGeneral.js","components/SearchIO.js","components/Search.js","utils/remix.js","utils/utils.js","components/PclassList.js","components/Workspace.js","config.js","utils/fetchers.js","components/SearchList.js","utils/web3.js","components/PclassDetails.js","components/gapi/IoGapi.js","components/gapi/PfunctionGapi.js","App.js","utils/queries.js","serviceWorker.js","index.js"],"names":["SearchGeneral","props","state","text","field","valid","onChangeText","bind","details","slice","length","queryField","this","setState","onQueryChange","error","name","placeholder","Component","SearchIO","onFieldSelect","selected","onClick","style","fontFamily","SearchComponent","genQuery","fxQuery","onQueryChangeGeneral","onQueryChangeFx","onSearch","styles","flex","bordered","flexDirection","justifyContent","alignItems","padding","borderTopWidth","borderTopColor","small","rounded","backgroundColor","type","chain","remixClient","createIframeClient","pclasses","a","onload","console","log","forEach","pclass","exportPclassToRemix","pluginName","Array","call","e","data","sourceByLanguage","sourcesTemp","Object","keys","fileName","includes","clipboardCopy","aux","document","createElement","setAttribute","body","appendChild","select","execCommand","removeChild","colorMap","event","payable","nonconstant","constant","pfunctionColor","gapi","colorClass","pfunctionColorClass","PclassList","_renderHeader","_renderContent","_renderListItem","item","expanded","headerButtons","buttons","header","map","btn","i","buttonStyle","key","callback","icon","fontSize","fontWeight","paddingLeft","maxWidth","minWidth","pfunctions","pfunction","signature","signatureString","outputs","out","join","contentButtons","contentItem","push","_id","source","uri","height","width","borderRadius","index","separators","dataArray","keyExtractor","renderHeader","renderContent","contentStyle","FlatList","renderItem","scrollEnabled","scrollEventThrottle","StyleSheet","create","marginLeft","Workspace","onValueChange","exportTo","value","treedata","exportToRemix","exportToPlugin","onRemove","onGoToSearchList","mode","marginRight","selectedValue","Item","label","PIPEOS_SERVER","host","process","REACT_APP_PIPEOS_SERVER","route","DEFAULT_OPTIONS","revalidateOnFocus","revalidateOnReconnect","dedupingInterval","focusThrottleInterval","loadingTimeout","errorRetryInterval","pclassWithPfuncApi","filter","relations","relation","scope","include","JSON","stringify","pclassCount","where","fetcher","apiUrl","fetch","res","json","useSearchResults","useSWR","useSearchCount","SearchListCommon","onGoToSearch","resultsCount","onPreviousPage","skip","onAddListPage","onGoToWorkspace","treedataLen","SearchListPClasses","whereFilter","count","onInfo","onSelect","onPfunctionRun","SearchListPClassesByPclassi","pclassiData","pclassi","pclassInstances","SearchListPfunctions","limit","pfuncData","indexes","pfunc","getWeb3","networkName","window","ethereum","enable","provider","ethers","providers","Web3Provider","signer","getSigner","getDefaultProvider","CHAIN_NAMES","1","3","4","5","42","getEtherscanApi","chainid","chainname","getEtherscanTx","txhash","PRERECEIPT_TYPE","components","RECEIPT_TYPE","PclassDetails","pcdata","textareaStyles","minHeight","deployments","address","deployment","etherscanApi","accessibilityRole","href","color","target","transparent","clipboardBtn","deploymentField","deploymentValues","block","disabled","constructorArgs","natspec","compiler","compilerOutput","runtime","bytecode","onInfoClosed","nonStringTypes","decodeValueString","encodeValueString","decodeValueNonString","parse","encodeValueNonString","IoUI","itemType","decodeValue","encodeValue","find","typ","readonly","IoGapi","componentsOpened","componentValues","onComponentsValueChange","onOpenComponents","getLabel","stackedLabel","subio","PfunctionGapi","inputs","initInputsState","initOutputsState","onRun","ioGapiInputs","defaultVals","abityp","comp","ioGapiOutputs","sig","signatureInp","inp","typesig","signatureOut","stateMutability","web3","getNetwork","chainId","instance","inst","parseInt","contract","Contract","result","hash","wait","receipt","transactionHash","ioStyles","paddingRight","getPageSize","noOfPages","AppContent","DEFAULT_FILTER","PAGE_NUMBER","getWindowDimensions","pclassWhere","pfunctionWhere","pclassiWhere","assign","showPclassInfo","runPfunction","scrollRef","React","createRef","onContentSizeChange","onWorkspaceAddItem","onWorkspaceRemoveItem","Dimensions","addEventListener","setWeb3","network","wdims","get","rootDims","getElementById","getBoundingClientRect","findIndex","splice","like","options","buildWhereQueries","inq","buildWhereFx","isChanged","sizes","current","scrollTo","x","y","animated","scrollToEnd","pageStyles","whereFilters","wherekey","showFunctions","showByPclassi","ScrollView","ref","horizontal","pagingEnabled","nestedScrollEnabled","contentContainerStyle","id","App","container","Boolean","location","hostname","match","ReactDOM","render","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.7274943b.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { Icon, Item, Input} from \"native-base\";\n// import {debounce} from '../utils.js';\n\nconst queryField = (text) => {\n  if (text.slice(0, 2) === '0x') {\n    if (text.length === 42) return {field: 'address', valid: true};\n    if (text.length === 10) return {field: 'signature', valid: true};\n\n    return {field: 'unknown', valid: false};\n  }\n  return {field: 'name', valid: true};\n}\n\nexport default class SearchGeneral extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      text: '',\n      field: 'name',\n      valid: true,\n    }\n\n    this.onChangeText = this.onChangeText.bind(this);\n    // this.debouncedSearch = this.debouncedSearch.bind(this);\n  }\n\n  // debouncedSearch = debounce(function() {\n  //       this.isCalculating = true;\n  //       setTimeout(function () {\n  //           this.isCalculating = false;\n  //           console.log('-- search', this.state);\n  //       }.bind(this), 1000);\n  //   }, 1200)\n\n  onChangeText(text) {\n    const details = queryField(text);\n    this.setState({ text, ...details });\n    // if (details.valid) this.debouncedSearch();\n    if (details.valid) this.props.onQueryChange({ text, ...details });\n  }\n\n  render() {\n    return (\n      <Item error={this.state.valid ? false : true}>\n        <Icon name='search'/>\n        <Input\n          placeholder='name / address / signature'\n          onChangeText={text => this.onChangeText(text)}\n        />\n      </Item>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport {\n  Content,\n  View,\n  Body,\n  Item,\n  ListItem,\n  Icon,\n  Input,\n  Radio,\n  Text,\n} from \"native-base\";\n// import {debounce} from '../utils.js';\n\nexport default class SearchIO extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      field: 'inputs',\n      text: '',\n      valid: true,\n    }\n\n    this.onChangeText = this.onChangeText.bind(this);\n    this.onFieldSelect = this.onFieldSelect.bind(this);\n    // this.debouncedSearch = this.debouncedSearch.bind(this);\n  }\n\n  // debouncedSearch() {\n  //   const self = this;\n  //   return (debounce(function() {\n  //       // this.isCalculating = true;\n  //       setTimeout(function () {\n  //           // this.isCalculating = false;\n  //           console.log('-- search', self.state);\n  //       }.bind(self), 1000);\n  //   }, 1000))();\n  // }\n\n  onChangeText(text) {\n    this.setState({ text });\n    // const details = queryType(text);\n    // this.setState({ text, ...details });\n    // if (details.valid) this.debouncedSearch();\n    this.props.onQueryChange({ ...this.state, text });\n  }\n\n  onFieldSelect(field) {\n    this.setState({ field });\n    this.props.onQueryChange({ ...this.state, field });\n  }\n\n  render() {\n    return (\n      <View>\n          <Item>\n            <Icon name='search'/>\n            <Input\n              placeholder='type: address / uint256 / ...'\n              onChangeText={text => this.onChangeText(text)}\n            />\n          </Item>\n\n          <Content>\n            <ListItem\n              selected={this.state.field === 'inputs' ? true : false}\n              onClick={() => this.onFieldSelect('inputs')}\n            >\n              <Radio selected={this.state.field === 'inputs' ? true : false} />\n              <Body>\n                <Text style={{ fontFamily: null }}>input</Text>\n              </Body>\n            </ListItem>\n            <ListItem\n              selected={this.state.field === 'outputs' ? true : false}\n              onClick={() => this.onFieldSelect('outputs')}\n            >\n              <Radio selected={this.state.field === 'outputs' ? true : false} />\n              <Body>\n                <Text style={{ fontFamily: null }}>output</Text>\n              </Body>\n            </ListItem>\n          </Content>\n\n      </View>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport {\n  Content,\n  View,\n  Left,\n  Icon,\n  Button,\n  Separator,\n  Text,\n} from 'native-base';\nimport SearchGeneral from './SearchGeneral.js';\nimport SearchIO from './SearchIO.js';\n\nexport default class SearchComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      genQuery: { text: '', field: 'name' },\n      fxQuery: { text: '', field: 'inputs' },\n    }\n\n    this.onQueryChangeGeneral = this.onQueryChangeGeneral.bind(this);\n    this.onQueryChangeFx = this.onQueryChangeFx.bind(this);\n    this.onSearch = this.onSearch.bind(this);\n  }\n\n  onQueryChangeGeneral(genQuery) {\n    this.setState({ genQuery });\n  }\n\n  onQueryChangeFx(fxQuery) {\n    this.setState({ fxQuery });\n  }\n\n  onSearch() {\n    this.props.onQueryChange(this.state);\n  }\n\n  render() {\n    return (\n      <View style={{ ...this.props.styles, flex: 1 }}>\n        <Content>\n          <SearchGeneral onQueryChange={this.onQueryChangeGeneral} />\n          <Separator bordered></Separator>\n          <SearchIO onQueryChange={this.onQueryChangeFx} />\n        </Content>\n        <View style={{\n          flexDirection: \"row\",\n          justifyContent: \"space-between\",\n          alignItems: \"flex-end\",\n          padding: 5,\n          borderTopWidth: 1,\n          borderTopColor: '#cccccc',\n        }}>\n          <Left>\n            <Button\n              small\n              rounded\n              style={{backgroundColor: '#cccccc'}}\n              onClick={this.onSearch}\n            >\n              <Icon type=\"MaterialCommunityIcons\" name='import' />\n            </Button>\n          </Left>\n          <Text>Network: {this.props.chain.name}</Text>\n        </View>\n      </View>\n    )\n  }\n}\n","import {createIframeClient} from '@remixproject/plugin';\n\nconst remixClient = createIframeClient();\n\nexport async function exportToRemix(pclasses) {\n  await remixClient.onload();\n  console.log('exportToRemix', pclasses)\n  pclasses.forEach(pclass => {\n    exportPclassToRemix(pclass);\n  });\n}\n\nexport async function exportToPlugin(pclasses = [], pluginName) {\n  if (!(pclasses instanceof Array)) {\n    pclasses = [pclasses];\n  }\n  try {\n    remixClient.call(\n      pluginName,\n      'loadChainLensWorkspace',\n      pclasses,\n    );\n  } catch (e) {\n    console.error('exportToPlugin failed', pluginName, e);\n  }\n}\n\nexport async function exportPclassToRemix(pclass) {\n  console.log('sourceByLanguage', pclass.data.sourceByLanguage)\n  if (!pclass.data.sourceByLanguage || !pclass.data.sourceByLanguage['0']) return;\n\n  // TODO: fix this to sources\n  const sourcesTemp = pclass.data.sourceByLanguage['0'].sourcesTemp;\n\n  Object.keys(sourcesTemp).forEach(name => {\n    // let fileName = `browser/${source.relative_path}`;\n    let fileName = `browser/${name}`;\n    if (!fileName.includes('.sol')) {\n      fileName += '.sol';\n    }\n    remixClient.call(\n      'fileManager',\n      'setFile',\n      fileName,\n      sourcesTemp[name],\n    );\n  });\n}\n","export const clipboardCopy = (text) => {\n    const aux = document.createElement(\"input\");\n    aux.setAttribute(\"value\", text);\n    document.body.appendChild(aux);\n    aux.select();\n    document.execCommand(\"copy\");\n    document.body.removeChild(aux);\n};\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nexport function debounce(func, wait, immediate) {\n    var timeout;\n    return function () {\n        var context = this, args = arguments;\n        var later = function() {\n            timeout = null;\n            if (!immediate) func.apply(context, args);\n        };\n        var callNow = immediate && !timeout;\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (callNow) func.apply(context, args);\n    };\n};\n\nexport function pfunctionColorClass(gapi) {\n    let colorClass = '';\n    if (gapi.type === 'event') {\n        colorClass = 'event';\n    } else if (gapi.payable) {\n        colorClass = 'payable';\n    } else if (!gapi.constant) {\n        colorClass = 'nonconstant';\n    } else {\n      colorClass = 'constant';\n    }\n    return colorClass;\n};\n\nexport const colorMap = {\n    event: '#C9DEBB',\n    payable: '#CDE0F2',\n    nonconstant: '#E9DEDE',\n    constant: 'rgb(240, 239, 245)',\n};\n\nexport function pfunctionColor(gapi) {\n    const colorClass = pfunctionColorClass(gapi);\n    return colorMap[colorClass];\n};\n","import React, { Component } from \"react\";\nimport { StyleSheet, FlatList } from 'react-native';\nimport {\n  View,\n  Accordion,\n  List,\n  ListItem,\n  Left,\n  Right,\n  Icon,\n  Text,\n  Button,\n  Thumbnail,\n} from \"native-base\";\nimport { pfunctionColor } from '../utils/utils.js';\n\nexport default class PclassList extends Component {\n  constructor(props) {\n    super(props);\n\n    this._renderHeader = this._renderHeader.bind(this);\n    this._renderContent = this._renderContent.bind(this);\n    this._renderListItem = this._renderListItem.bind(this);\n  }\n\n  _renderHeader(item, expanded) {\n    const headerButtons = this.props.buttons.header.map((btn, i) => {\n      return (\n        <Button\n          small rounded\n          style={styles.buttonStyle}\n          key={i}\n          onClick={() => btn.callback(item)}\n        >\n          <Icon type={btn.icon.type} name={btn.icon.name} />\n        </Button>\n      )\n    });\n\n    return (\n      <View style={{\n          padding: 5,\n          flexDirection: \"row\",\n          justifyContent: \"space-between\",\n          alignItems: \"center\",\n          backgroundColor: \"#fafafa\"\n        }}\n      >\n\n        <View style={{flexDirection: \"row\"}}>\n          {expanded\n            ? <Icon style={{ fontSize: 18 }} name=\"remove-circle\" />\n            : <Icon style={{ fontSize: 18 }} name=\"add-circle\" />\n          }\n          <Text style={{ fontFamily: null, fontWeight: \"400\", paddingLeft: 10, maxWidth: this.props.styles.minWidth - 160 }}>\n            {item.data.name}\n          </Text>\n        </View>\n\n        <View style={{flexDirection: \"row\"}}>\n          {headerButtons}\n        </View>\n      </View>\n    );\n  }\n\n  _renderContent(item) {\n    const pfunctions = [];\n    (item.pfunctions || []).forEach(pfunction => {\n      if (!pfunction.data.name) return;\n\n      let signature = pfunction.data.signatureString;\n      if (\n        pfunction.data.gapi.outputs\n        && pfunction.data.gapi.outputs.length > 0\n      ) {\n        signature += `->(${\n          pfunction.data.gapi.outputs\n            .map(out => out.type)\n            .join(',')\n        })`;\n      }\n\n      const contentButtons = this.props.buttons.contentItem.map((btn, i) => {\n        return (\n          <Button\n            small rounded\n            style={styles.buttonStyle}\n            key={i}\n            onClick={() => btn.callback({ pfunction, pclass: item })}\n          >\n            <Icon type={btn.icon.type} name={btn.icon.name} />\n          </Button>\n        )\n      });\n\n      pfunctions.push((\n        <ListItem key={pfunction._id} style={{ backgroundColor: pfunctionColor(pfunction.data.gapi) }}>\n          <Left>\n            <View style={{flexDirection: \"row\", alignItems: \"center\"}}>\n              {pfunction.data.gapi.type === 'event'\n                ? <Thumbnail\n                    source={{ uri: '/event.png' }}\n                    style={{ height: 15, width: 15, borderRadius: 5}}\n                  />\n                : <Thumbnail\n                    source={{ uri: '/lambda.png' }}\n                    style={{ height: 15, width: 15, borderRadius: 5}}\n                  />\n              }\n              <Text\n                style={{ fontFamily: null, paddingLeft: 10, maxWidth: this.props.styles.minWidth - 170}}\n              >{signature}</Text>\n            </View>\n          </Left>\n          <Right>\n            {contentButtons}\n          </Right>\n        </ListItem>\n      ));\n    });\n\n    return (\n      <List style={{ paddingLeft: 15 }}>{pfunctions}</List>\n    )\n  }\n\n  _renderListItem({ item, index, separators }) {\n    return (\n      <Accordion\n        dataArray={[item]}\n        keyExtractor={item => item._id}\n        renderHeader={this._renderHeader}\n        renderContent={this._renderContent}\n        contentStyle={{ flex: 1, backgroundColor: '#ffffff' }}\n      />\n    );\n  }\n\n  render() {\n    const { data: dataArray } = this.props;\n\n    return (\n      <FlatList\n        data={dataArray}\n        keyExtractor={item => item._id}\n        renderItem={this._renderListItem}\n\n        scrollEnabled={true}\n        scrollEventThrottle={300}\n\n        contentStyle={{ flex: 1, backgroundColor: '#ffffff' }}\n      />\n    );\n\n    // removeClippedSubviews={true}\n    // getItemLayout\n    // nestedScrollEnabled={true}\n    // onRefresh={this._onRefresh}\n    // refreshing={this.state.refreshing}\n  }\n}\n\n\nconst styles = StyleSheet.create(\n  {\n    buttonStyle: {\n      backgroundColor: '#cccccc',\n      marginLeft: 15,\n    },\n  }\n)\n","import React, { Component } from 'react';\nimport { StyleSheet } from 'react-native';\nimport {\n  View,\n  Right,\n  Left,\n  Icon,\n  Button,\n  Text,\n  Picker,\n} from 'native-base';\nimport { exportToRemix, exportToPlugin } from '../utils/remix.js';\nimport PclassList from './PclassList.js';\n\n\nexport default class Workspace extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selected: 'remix',\n    }\n\n    this.onValueChange = this.onValueChange.bind(this);\n    this.exportTo = this.exportTo.bind(this);\n  }\n\n  onValueChange(value) {\n    this.setState({ selected: value });\n  }\n\n  exportTo(pclass) {\n    const selected = this.state.selected;\n    const data = pclass ? [pclass] : this.props.treedata;\n\n    if (selected === 'remix') {\n      exportToRemix(data)\n    } else {\n      exportToPlugin(data, 'pipeline');\n    }\n  }\n\n  render() {\n    const { props } = this;\n    const buttons = {\n      header: [\n        {\n          callback: props.onRemove,\n          icon: {\n            type: 'FontAwesome',\n            name: 'close',\n          }\n        },\n        {\n          callback: this.exportTo,\n          icon: {\n            type: 'MaterialCommunityIcons',\n            name: 'import',\n          }\n        }\n      ],\n      contentItem: []\n    }\n\n    return (\n      <View style={{...props.styles, flex: 1}}>\n        <PclassList\n          data={props.treedata}\n          buttons={buttons}\n          styles={props.styles}\n        />\n\n        <View style={{\n          flexDirection: \"row\",\n          justifyContent: \"space-between\",\n          alignItems: \"center\",\n          padding: 5,\n          borderTopWidth: 1,\n          borderTopColor: '#cccccc',\n        }}>\n          <Left>\n            <Button small rounded style={styles.buttonStyle} onClick={props.onGoToSearchList}>\n              <Icon type=\"MaterialCommunityIcons\" name='chevron-left' />\n            </Button>\n          </Left>\n          <Picker\n            mode=\"dropdown\"\n            style={{ width: 0, marginRight: 10 }}\n            selectedValue={ this.state.selected }\n            onValueChange={ this.onValueChange }\n          >\n            <Picker.Item label=\"FileManager\" value=\"remix\" />\n            <Picker.Item label=\"Pipeline\" value=\"pipeline\" />\n            <Picker.Item label=\"JSON\" value=\"json\" />\n          </Picker>\n          <Right>\n            <Button small rounded style={styles.buttonStyle} onClick={ this.exportTo }>\n              <Text>{props.treedata.length}</Text>\n              <Icon type=\"MaterialCommunityIcons\" name='import' />\n            </Button>\n          </Right>\n        </View>\n      </View>\n    )\n  }\n}\n\nconst styles = StyleSheet.create(\n  {\n    buttonStyle: {\n      backgroundColor: '#cccccc',\n    },\n  },\n)\n","export const PIPEOS_SERVER = {\n  host: process.env.REACT_APP_PIPEOS_SERVER || 'https://chainlens.herokuapp.com',\n  route: {\n    pclass: '/pclass',\n    pfunction: '/pfunction',\n  },\n}\nconsole.log('PIPEOS_SERVER', PIPEOS_SERVER);\n","import {PIPEOS_SERVER} from '../config';\nimport fetch from 'unfetch';\nimport useSWR from \"swr\";\n\nconst DEFAULT_OPTIONS = {\n  revalidateOnFocus: false,\n  revalidateOnReconnect: false,\n  dedupingInterval: 20000,\n  focusThrottleInterval: 500000,\n  loadingTimeout: 5000,\n  errorRetryInterval: 10000,\n}\n\nexport const pclassApi = () => `${PIPEOS_SERVER.host}${PIPEOS_SERVER.route.pclass}`;\n\nexport const pfunctionApi = () => `${PIPEOS_SERVER.host}${PIPEOS_SERVER.route.pfunction}`;\n\nexport const pclassWithPfuncApi = (filter = {}, type = 'pclass') => {\n  let relations = [];\n  if (type === 'pclass') {\n    relations = [{relation: 'pfunctions'}, {relation: 'pclassInstances'}];\n  }\n  if (type === 'pfunction') {\n    relations = [{relation: 'pclass'}];\n  }\n  if (type === 'pclassi') {\n    relations = [{\n      relation: 'pclass',\n      scope: {\n        include: [{relation: 'pfunctions'}],\n      },\n    }];\n  }\n\n  filter = {...filter, include: relations};\n\n  console.log('filter', filter, JSON.stringify(filter));\n  return `${PIPEOS_SERVER.host}/${type}?filter=${JSON.stringify(filter)}`;\n}\n\nexport const pclassCount = (filter = {}, type) => {\n  console.log('pclassCount', filter.where, JSON.stringify(filter.where));\n  return `${PIPEOS_SERVER.host}/${type}/count?where=${JSON.stringify(filter.where)}`;\n}\n\nexport async function fetcher(apiUrl) {\n  console.log('!! fetcher');\n  const res = await fetch(apiUrl);\n  return await res.json();\n}\n\nexport function useSearchResults(filter, type = 'pclass') {\n  return useSWR(pclassWithPfuncApi(filter, type), fetcher, DEFAULT_OPTIONS)\n}\n\nexport function useSearchCount(filter, type = 'pclass') {\n  return useSWR(pclassCount(filter, type), fetcher, DEFAULT_OPTIONS)\n}\n","import React from 'react';\nimport { StyleSheet } from 'react-native';\nimport {\n  View,\n  Icon,\n  Button,\n  Text,\n} from 'native-base';\nimport PclassList from './PclassList.js';\nimport { useSearchResults, useSearchCount } from '../utils/fetchers.js';\n\nexport function SearchListCommon(props) {\n  return (\n    <View style={{ ...props.styles, flex: 1 }}>\n      <PclassList\n        data={props.data}\n        buttons={props.buttons}\n        styles={props.styles}\n      />\n\n      <View style={{\n        flexDirection: \"row\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        padding: 5,\n        borderTopWidth: 1,\n        borderTopColor: '#cccccc',\n      }}>\n        <Button small rounded style={ styles.buttonStyle } onClick={props.onGoToSearch}>\n          <Icon name='search' />\n          <Text>{props.resultsCount}</Text>\n        </Button>\n        <View style={{flexDirection: \"row\", alignItems: \"center\"}}>\n          <Button small rounded style={ styles.buttonStyle } onClick={props.onPreviousPage}>\n            <Icon type=\"FontAwesome\" name='caret-left' />\n          </Button>\n          <Text>\n            @{(props.filter.skip || 0) + 1}\n          </Text>\n          <Button small rounded style={ styles.buttonStyle } onClick={props.onAddListPage}>\n            <Icon type=\"FontAwesome\" name='caret-right' />\n          </Button>\n        </View>\n        <Button small rounded style={ styles.buttonStyle } onClick={props.onGoToWorkspace}>\n          <Text>{props.treedataLen || 0}</Text>\n          <Icon type=\"MaterialCommunityIcons\" name='import' />\n        </Button>\n      </View>\n\n    </View>\n  )\n}\n\nexport function SearchListPClasses(props) {\n  const { whereFilter, filter } = props;\n\n  filter.where = whereFilter;\n\n  console.log('!!!!!!!! SearchListPClasses !!!!!!!')\n\n  const { data, error } = useSearchResults(filter, 'pclass');\n  const { data: count } = useSearchCount(filter, 'pclass');\n  const resultsCount = count ? count.count : 0;\n\n  if (error) return <div>failed to load</div>\n  if (!data) return <div>loading...</div>\n\n  console.log('data', data)\n  console.log('count', resultsCount);\n\n  const buttons = {\n    header: [\n      {\n        callback: props.onInfo,\n        icon: {\n          type: 'FontAwesome',\n          name: 'info',\n        }\n      },\n      {\n        callback: props.onSelect,\n        icon: {\n          type: 'MaterialCommunityIcons',\n          name: 'import',\n        }\n      }\n    ],\n    contentItem: [\n      {\n        callback: props.onPfunctionRun,\n        icon: {\n          type: 'MaterialCommunityIcons',\n          name: 'play',\n        }\n      }\n    ]\n  }\n\n  return (\n    <SearchListCommon\n      data={data}\n      resultsCount={resultsCount}\n      filter={filter}\n      styles={props.styles}\n      buttons={buttons}\n      onGoToSearch={props.onGoToSearch}\n      onPreviousPage={props.onPreviousPage}\n      onAddListPage={props.onAddListPage}\n      onGoToWorkspace={props.onGoToWorkspace}\n      treedataLen={props.treedataLen}\n    />\n  )\n}\n\nexport function SearchListPClassesByPclassi(props) {\n  const { whereFilter, filter } = props;\n\n  filter.where = whereFilter;\n\n  console.log('!!!!!!!! SearchListPClassesByPclassi !!!!!!!', JSON.stringify(filter));\n\n  const { data: pclassiData, error } = useSearchResults(filter, 'pclassi');\n  const { data: count } = useSearchCount(filter, 'pclassi');\n  const resultsCount = count ? count.count : 0;\n\n  if (error) return <div>failed to load</div>\n  if (!pclassiData) return <div>loading...</div>\n\n  const data = pclassiData.map(pclassi => {\n    const pclass = pclassi.pclass;\n    pclass.pclassInstances = [pclassi];\n    return pclass;\n  });\n\n  console.log('data', data)\n  console.log('count', resultsCount);\n\n  const buttons = {\n    header: [\n      {\n        callback: props.onInfo,\n        icon: {\n          type: 'FontAwesome',\n          name: 'info',\n        }\n      },\n      {\n        callback: props.onSelect,\n        icon: {\n          type: 'MaterialCommunityIcons',\n          name: 'import',\n        }\n      }\n    ],\n    contentItem: [\n      {\n        callback: props.onPfunctionRun,\n        icon: {\n          type: 'MaterialCommunityIcons',\n          name: 'play',\n        }\n      }\n    ]\n  }\n\n  return (\n    <SearchListCommon\n      data={data}\n      resultsCount={resultsCount}\n      filter={filter}\n      styles={props.styles}\n      buttons={buttons}\n      onGoToSearch={props.onGoToSearch}\n      onPreviousPage={props.onPreviousPage}\n      onAddListPage={props.onAddListPage}\n      onGoToWorkspace={props.onGoToWorkspace}\n      treedataLen={props.treedataLen}\n    />\n  )\n}\n\nexport function SearchListPfunctions(props) {\n  const { whereFilter, filter } = props;\n  filter.where = whereFilter;\n  filter.limit = 300;\n\n\n  console.log('!!!!!!!! SearchListPfunctions !!!!!!!')\n\n  const { data: pfuncData, error } = useSearchResults(filter, 'pfunction');\n  const { data: count } = useSearchCount(filter, 'pfunction');\n  const resultsCount = count ? count.count : 0;\n\n  if (error) {\n    console.error(error);\n    return <div>failed to load</div>\n  }\n  if (pfuncData instanceof Object && pfuncData.error) {\n    console.error(pfuncData.error);\n    return <div>failed to load</div>\n  }\n  if (!pfuncData) return <div>loading...</div>\n\n  let indexes = {};\n  let data = [];\n  (pfuncData || []).forEach(pfunc => {\n    const pclass = pfunc.pclass;\n    console.log('pclass._id', pclass._id, indexes[pclass._id]);\n    if (!indexes[pclass._id] && indexes[pclass._id] !== 0) {\n      pclass.pfunctions = [pfunc];\n      indexes[pclass._id] = data.length;\n      data.push(pclass);\n    } else {\n      data[indexes[pclass._id]].pfunctions.push(pfunc);\n    }\n  });\n\n  console.log('data', data.length, data.slice(0, 3));\n  console.log('count', resultsCount);\n\n  const buttons = {\n    header: [\n      {\n        callback: props.onInfo,\n        icon: {\n          type: 'FontAwesome',\n          name: 'info',\n        }\n      },\n      {\n        callback: props.onSelect,\n        icon: {\n          type: 'MaterialCommunityIcons',\n          name: 'import',\n        }\n      }\n    ],\n    contentItem: [\n      {\n        callback: props.onPfunctionRun,\n        icon: {\n          type: 'MaterialCommunityIcons',\n          name: 'play',\n        }\n      }\n    ]\n  }\n\n  return (\n    <SearchListCommon\n      data={data}\n      resultsCount={resultsCount}\n      filter={filter}\n      styles={props.styles}\n      buttons={buttons}\n      onGoToSearch={props.onGoToSearch}\n      onPreviousPage={props.onPreviousPage}\n      onAddListPage={props.onAddListPage}\n      onGoToWorkspace={props.onGoToWorkspace}\n      treedataLen={props.treedataLen}\n    />\n  )\n}\n\nconst styles = StyleSheet.create(\n  {\n    buttonStyle: {\n      backgroundColor: '#cccccc',\n    },\n  },\n)\n","import {ethers} from 'ethers';\n\nexport const getWeb3 = async (networkName = 'ropsten') => {\n    let provider, signer;\n    if (window.ethereum) {\n        try {\n            await window.ethereum.enable();\n            provider = new ethers.providers.Web3Provider(window.ethereum);\n            signer = provider.getSigner();\n        } catch (error) {\n            console.log('User rejected dApp connection');\n            provider = ethers.getDefaultProvider(networkName);\n        }\n    }\n    else {\n        console.log('Non-Ethereum browser detected. Consider trying MetaMask!');\n        provider = ethers.getDefaultProvider(networkName);\n    }\n    window.provider = provider;\n    return {provider, signer};\n};\n\nexport const CHAIN_NAMES = {\n  1: 'mainnet',\n  3: 'ropsten',\n  4: 'rinkeby',\n  5: 'goerli',\n  42: 'kovan',\n}\n\nexport const getEtherscanApi = (chainid) => {\n  let chainname = CHAIN_NAMES[chainid];\n  if (chainid === 1) chainname = '';\n  else chainname += '.';\n  return `https://${chainname}etherscan.io`;\n}\n\nexport const getEtherscanApiContract = (chainid, address) => {\n  return `${getEtherscanApi(chainid)}/address/${address}#code`;\n}\n\nexport const getEtherscanTx = (chainid, txhash) => {\n  return `${getEtherscanApi(chainid)}/tx/${txhash}`;\n}\n\nexport const PRERECEIPT_TYPE = {\n  name: 'receipt',\n  type: 'tuple',\n  components: [\n    {\n      name: 'etherscan',\n      type: 'link',\n    },\n    {\n      name: 'hash',\n      type: 'string',\n    },\n    {\n      name: 'blockHash',\n      type: 'string',\n    },\n    {\n      name: 'blockNumber',\n      type: 'uint256',\n    },\n    {\n      name: 'confirmations',\n      type: 'uint256',\n    },\n  ]\n}\n\nexport const RECEIPT_TYPE = {\n  name: 'receipt',\n  type: 'tuple',\n  components: [\n    {\n      name: 'etherscan',\n      type: 'link',\n    },\n    {\n      name: 'transactionHash',\n      type: 'string',\n    },\n    {\n      name: 'blockHash',\n      type: 'string',\n    },\n    {\n      name: 'blockNumber',\n      type: 'uint256',\n    },\n    {\n      name: 'confirmations',\n      type: 'uint256',\n    },\n  ]\n}\n","import React from \"react\";\nimport { StyleSheet } from 'react-native';\nimport {\n  Content,\n  View,\n  Body,\n  Card,\n  CardItem,\n  Icon,\n  Text,\n  Textarea,\n  H1,\n  H3,\n  Button,\n  Left,\n} from \"native-base\";\nimport { getEtherscanApiContract } from '../utils/web3.js';\nimport { clipboardCopy } from '../utils/utils.js';\n\n\nexport function PclassDetails(props) {\n  const { pclass } = props;\n  const { data: pcdata } = pclass;\n\n  const textareaStyles = { minWidth: props.styles.minWidth - 40, minHeight: 150 };\n\n  const deployments = (pclass.pclassInstances || []).map(pclassi => {\n    const {deployment} = pclassi.data;\n    const etherscanApi = getEtherscanApiContract(deployment.chainid, deployment.address);\n    return (\n      <View key={pclassi._id} style={{flexDirection: \"column\"}}>\n      <View>\n        <Text\n          accessibilityRole=\"link\"\n          href={etherscanApi}\n          style={{color: 'blue'}}\n          target=\"_blank\"\n        >\n          {etherscanApi}\n        </Text>\n      </View>\n        <View style={{flexDirection: \"row\", alignItems: \"center\"}}>\n          <Button transparent small onClick={() => clipboardCopy(deployment.chainid)}>\n            <Icon type=\"MaterialCommunityIcons\" name='content-copy' style={styles.clipboardBtn} />\n          </Button>\n          <Text style={styles.deploymentField}>Chain ID: </Text>\n          <Text style={styles.deploymentValues}> {deployment.chainid}</Text>\n        </View>\n        <View style={{flexDirection: \"row\", alignItems: \"center\"}}>\n          <Button transparent small onClick={() => clipboardCopy(deployment.block)}>\n            <Icon type=\"MaterialCommunityIcons\" name='content-copy' style={styles.clipboardBtn} />\n          </Button>\n          <Text style={styles.deploymentField}>Block: </Text>\n          <Text style={styles.deploymentValues}> {deployment.block}</Text>\n        </View>\n        <View style={{flexDirection: \"column\" }}>\n          <View style={{flexDirection: \"row\", alignItems: \"center\"}}>\n            <Button transparent small onClick={() => clipboardCopy(deployment.address)}>\n              <Icon type=\"MaterialCommunityIcons\" name='content-copy' style={styles.clipboardBtn} />\n            </Button>\n            <Text style={styles.deploymentField}>Address: </Text>\n          </View>\n          <Textarea style={{ ...textareaStyles, height: 40, minHeight: 40 }} disabled bordered value={deployment.address}/>\n        </View>\n        <View style={{flexDirection: \"column\" }}>\n          <View style={{flexDirection: \"row\", alignItems: \"center\"}}>\n            <Button transparent small onClick={() => clipboardCopy(deployment.txhash)}>\n              <Icon type=\"MaterialCommunityIcons\" name='content-copy' style={styles.clipboardBtn} />\n            </Button>\n            <Text style={styles.deploymentField}>Transaction Hash: </Text>\n          </View>\n          <Textarea style={{ ...textareaStyles, height: 40, minHeight: 40 }} disabled bordered value={deployment.txhash}/>\n        </View>\n        {deployment.constructorArgs\n          ? <View style={{flexDirection: \"column\" }}>\n              <View style={{flexDirection: \"row\", alignItems: \"center\"}}>\n                <Button transparent small onClick={() => clipboardCopy(deployment.constructorArgs)}>\n                  <Icon type=\"MaterialCommunityIcons\" name='content-copy' style={styles.clipboardBtn} />\n                </Button>\n                <Text style={styles.deploymentField}>Constructor Arguments: </Text>\n              </View>\n              <Textarea style={{ ...textareaStyles, minHeight: 60 }} disabled bordered value={deployment.constructorArgs}/>\n            </View>\n          : <></>\n        }\n      </View>\n    );\n  });\n\n  return (\n    <View style={{...props.styles, flex: 1, width: props.styles.minWidth }}>\n      <CardItem header>\n        <H1>{pcdata.name}</H1>\n      </CardItem>\n      <Content>\n        <Card>\n          <CardItem header>\n            <H3>Deployment:</H3>\n          </CardItem>\n          <CardItem>\n            <Body>\n              {deployments}\n            </Body>\n          </CardItem>\n          <CardItem>\n            <Body>\n              <View style={{flexDirection: \"row\", alignItems: \"center\"}}>\n                <Button transparent small onClick={() => clipboardCopy(JSON.stringify(pcdata.gapi))}>\n                  <Icon type=\"MaterialCommunityIcons\" name='content-copy' style={styles.clipboardBtn} />\n                </Button>\n                <H3>\n                  ABI\n                </H3>\n              </View>\n              <Textarea style={textareaStyles} disabled bordered value={JSON.stringify(pcdata.gapi)}/>\n            </Body>\n          </CardItem>\n          <CardItem>\n            <Body>\n              <View style={{flexDirection: \"row\", alignItems: \"center\",}}>\n                <Button transparent small onClick={() => clipboardCopy(JSON.stringify(pcdata.natspec))}>\n                  <Icon type=\"MaterialCommunityIcons\" name='content-copy' style={styles.clipboardBtn} />\n                </Button>\n                <H3>\n                  Natspec\n                </H3>\n              </View>\n              <Textarea style={textareaStyles} disabled bordered value={JSON.stringify(pcdata.natspec)}/>\n            </Body>\n          </CardItem>\n          <CardItem>\n            <Body>\n              <View style={{flexDirection: \"row\", alignItems: \"center\",}}>\n                <Button transparent small onClick={() => clipboardCopy(JSON.stringify(pcdata.sourceByLanguage['0'].compiler))}>\n                  <Icon type=\"MaterialCommunityIcons\" name='content-copy' style={styles.clipboardBtn} />\n                </Button>\n                <H3>\n                  Compiler\n                </H3>\n              </View>\n              <Textarea style={textareaStyles} disabled bordered value={JSON.stringify(pcdata.sourceByLanguage['0'].compiler)}/>\n            </Body>\n          </CardItem>\n          <CardItem>\n            <Body>\n              <View style={{flexDirection: \"row\", alignItems: \"center\",}}>\n                <Button transparent small onClick={() => clipboardCopy(pcdata.sourceByLanguage['0'].compilerOutput.runtime.bytecode)}>\n                  <Icon type=\"MaterialCommunityIcons\" name='content-copy' style={styles.clipboardBtn} />\n                </Button>\n                <H3>\n                  Runtime Bytecode\n                </H3>\n              </View>\n              <Textarea style={textareaStyles} disabled bordered value={pcdata.sourceByLanguage['0'].compilerOutput.runtime.bytecode}/>\n            </Body>\n          </CardItem>\n        </Card>\n      </Content>\n      <View style={{\n        flexDirection: \"row\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        padding: 5,\n        borderTopWidth: 1,\n        borderTopColor: '#cccccc',\n      }}>\n        <Left>\n          <Button small rounded style={styles.buttonStyle} onClick={props.onInfoClosed} >\n            <Icon type=\"MaterialCommunityIcons\" name='close' />\n          </Button>\n        </Left>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create(\n  {\n    deploymentField: {\n      fontWeight: 600,\n    },\n    deploymentValues: {\n      fontFamily: 'monospace',\n    },\n    buttonStyle: {\n      backgroundColor: '#cccccc',\n      marginRight: 15,\n    },\n    clipboardBtn: {\n      color: '#000000',\n    },\n  }\n)\n","import React, { Component } from \"react\";\n// import { StyleSheet } from 'react-native';\nimport {\n  View,\n  Icon,\n  Text,\n  Input,\n  Label,\n  Item,\n  Accordion,\n} from \"native-base\";\n\nconst nonStringTypes = ['int', 'float', 'tuple', 'boolean'];\nconst checkNonString = itemType => nonStringTypes.find(typ => itemType.includes(typ));\nconst decodeValueString = value => value || '';\nconst encodeValueString = value => value || '';\nconst decodeValueNonString = value => value ? JSON.parse(value) : null;\nconst encodeValueNonString = value => value ? JSON.stringify(value) : '';\n\nfunction IoUI(props) {\n  const { item } = props;\n  const isNonString = checkNonString(item.type);\n  let decodeValue, encodeValue;\n\n  if (isNonString) {\n    decodeValue = decodeValueNonString;\n    encodeValue = encodeValueNonString;\n  } else {\n    decodeValue = decodeValueString;\n    encodeValue = encodeValueString;\n  }\n  console.log('encodeValue', encodeValue(props.value));\n  if (item.type === 'link') {\n    return (\n      <Text\n        accessibilityRole=\"link\"\n        href={props.value}\n        style={{color: 'blue'}}\n        target=\"_blank\"\n      >\n        {props.value}\n      </Text>\n    )\n  }\n\n  return (\n    <Input\n      value={encodeValue(props.value)}\n      onChangeText={(text) => props.onValueChange(decodeValue(text))}\n      styles={props.styles}\n      disabled={props.readonly}\n    />\n  )\n}\n\nexport default class IoGapi extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      componentsOpened: false,\n      componentValues: props.value,\n    }\n\n    // this.onValueChange = this.onValueChange.bind(this);\n    this.onComponentsValueChange = this.onComponentsValueChange.bind(this);\n    this.onOpenComponents=this.onOpenComponents.bind(this);\n\n    this._renderHeader = this._renderHeader.bind(this);\n    this._renderContent = this._renderContent.bind(this);\n  }\n\n  getLabel(item) {\n    return item.label || `${item.name}:${item.type}`;\n  }\n\n  onOpenComponents() {\n    console.log('onOpenComponents');\n    this.setState({ componentsOpened: true });\n  }\n\n  onComponentsValueChange(value, i) {\n    console.log('IoGapi onComponentsValueChange', value, i);\n    const componentValues = this.state.componentValues;\n    componentValues[i] = value;\n    this.setState({ componentValues });\n    this.props.onValueChange(componentValues);\n  }\n\n  _renderHeader(item, expanded) {\n    const label = this.getLabel(item);\n    return (\n      <View style={{\n          padding: 5,\n          flexDirection: \"row\",\n          justifyContent: \"space-between\",\n          alignItems: \"center\",\n          backgroundColor: \"#fafafa\",\n          ...this.props.styles\n        }}\n      >\n        <View style={{ ...this.props.styles, flexDirection: \"row\" }}>\n          {expanded\n            ? <Icon style={{ fontSize: 18 }} name=\"remove-circle\" />\n            : <Icon style={{ fontSize: 18 }} name=\"add-circle\" />\n          }\n          <Item stackedLabel style={{ ...this.props.styles, maxWidth: this.props.styles.minWidth }}>\n            <Label>{label}</Label>\n            <IoUI\n              item={item}\n              value={this.props.value}\n              onValueChange={this.props.onValueChange}\n              styles={this.props.styles}\n              readonly={this.props.readonly}\n            />\n          </Item>\n        </View>\n      </View>\n    )\n  }\n\n  _renderContent(item) {\n    return (item.components || []).map((subio, i) => {\n      return (\n        <IoGapi\n          key={i}\n          styles={this.props.styles}\n          item={subio}\n          value={this.props.value[i]}\n          onValueChange={(value) => this.onComponentsValueChange(value, i)}\n          readonly={this.props.readonly}\n        />\n      );\n    });\n  }\n\n  render() {\n    const { item, styles, readonly } = this.props;\n    if (!item) return (<Text>---</Text>);\n\n    const label = this.getLabel(item);\n    return (\n      <View style={{ ...styles, flexDirection: \"row\", alignItems: \"center\"}}>\n        {!item.components || item.components.length === 0\n          ? <Item stackedLabel style={{ width: '100%' }}>\n              <Label>{label}</Label>\n              <IoUI\n                styles={styles}\n                item={item}\n                value={this.props.value}\n                onValueChange={this.props.onValueChange}\n                readonly={readonly}\n              />\n            </Item>\n          : <Accordion\n              dataArray={[item]}\n              expanded={0}\n              renderHeader={this._renderHeader}\n              renderContent={this._renderContent}\n              contentStyle={{ ...styles, flex: 1, backgroundColor: '#ffffff' }}\n            />\n        }\n      </View>\n    );\n  }\n}\n\n// const styles = StyleSheet.create(\n//   {\n//     buttonStyle: {\n//       backgroundColor: '#cccccc',\n//     },\n//   }\n// )\n","import React, { Component } from \"react\";\nimport { StyleSheet } from 'react-native';\nimport {\n  Content,\n  View,\n  Card,\n  CardItem,\n  Icon,\n  Text,\n  Button,\n  H1,\n  Right,\n  Left,\n} from \"native-base\";\n\nimport IoGapi from './IoGapi.js';\nimport { getWeb3, getEtherscanTx, PRERECEIPT_TYPE, RECEIPT_TYPE } from '../../utils/web3.js';\nimport { ethers } from 'ethers';\nimport { pfunctionColor } from '../../utils/utils.js';\n\nfunction defaultVals(abityp) {\n  if (!abityp || !abityp.components) {\n    return [];\n  }\n  let item = new Array(abityp.components.length);\n  abityp.components.forEach((comp, i) => {\n    if (comp.components) {\n      item[i] = defaultVals(comp);\n    }\n  });\n  return item;\n}\n\nexport class PfunctionGapi extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      inputs: this.initInputsState(),\n      outputs: this.initOutputsState(),\n    }\n\n    this.onValueChange = this.onValueChange.bind(this);\n    this.onRun = this.onRun.bind(this);\n  }\n\n  initInputsState() {\n    const { pfunction } = this.props.item;\n    const ioGapiInputs = this.ioGapiInputs(pfunction);\n    return ioGapiInputs && ioGapiInputs.components\n      ? new Array(ioGapiInputs.components.length)\n      : [];\n  }\n\n  initOutputsState() {\n    const { pfunction } = this.props.item;\n    const ioGapiOutputs = this.ioGapiOutputs(pfunction);\n    return defaultVals(ioGapiOutputs);\n  }\n\n  typesig(typ) {\n    let sig = '';\n    if (typ.name) sig += `${typ.name}:`;\n    sig += typ.type;\n    return sig;\n  }\n\n  ioGapiInputs(pfunction) {\n    const signatureInp = `(${pfunction.data.gapi.inputs.map(inp => this.typesig(inp)).join(',')})`;\n\n    return pfunction.data.gapi.inputs.length > 0 ? {\n      name: pfunction.data.signatureString,\n      type: 'tuple',\n      components: pfunction.data.gapi.inputs,\n      label: signatureInp,\n    } : null;\n  }\n\n  ioGapiOutputs(pfunction) {\n    let outputs = JSON.parse(JSON.stringify(\n      pfunction.data.gapi.outputs || []\n    ));\n\n    let signatureOut = `(${outputs.map(inp => this.typesig(inp)).join(',')})`;\n\n    if (\n      pfunction.data.gapi.stateMutability === 'payable'\n      || pfunction.data.gapi.stateMutability === 'nonpayable'\n    ) {\n      outputs = PRERECEIPT_TYPE.components;\n      signatureOut = `receipt(${outputs.map(inp => this.typesig(inp)).join(',')})`;\n    }\n\n    return outputs.length > 0 ? {\n      name: pfunction.data.signatureString,\n      type: 'tuple',\n      components: outputs,\n      label: signatureOut,\n    } : null;\n  }\n\n  onValueChange(value) {\n    console.log('--- onValueChange', value);\n    this.setState({ inputs: value });\n  }\n\n  async onRun() {\n    const { pclass, pfunction } = this.props.item;\n    const { pclassInstances } = pclass;\n\n    const web3 = await getWeb3();\n    const provider = web3.provider;\n    const signer = web3.signer;\n    const chain = (await provider.getNetwork()).chainId;\n\n    console.log('this.state.inputs', this.state.inputs);\n\n    const instance = pclassInstances.find(inst => inst.data.deployment.chainid === chain || inst.data.deployment.chainid === parseInt(chain))\n\n    const contract = new ethers.Contract(instance.data.deployment.address, pclass.data.gapi, signer);\n    const result = await contract[pfunction.data.name](...this.state.inputs);\n\n    console.log('result', result);\n    let outputs = (result instanceof Array) ? result : [result];\n\n    if (\n      pfunction.data.gapi.stateMutability === 'payable'\n      || pfunction.data.gapi.stateMutability === 'nonpayable'\n    ) {\n      outputs = PRERECEIPT_TYPE.components.map(comp => {\n        if (comp.name === 'etherscan') {\n          return getEtherscanTx(instance.data.deployment.chainid, result.hash);\n        }\n        if (!result[comp.name]) return 'waiting';\n        return result[comp.name];\n      });\n      this.setState({ outputs });\n\n      const receipt = await result.wait(2);\n      console.log('receipt', receipt);\n\n      outputs = RECEIPT_TYPE.components.map(comp => {\n        if (comp.name === 'etherscan') {\n          return getEtherscanTx(instance.data.deployment.chainid, receipt.transactionHash);\n        }\n        return receipt[comp.name];\n      });\n      this.setState({ outputs });\n\n      return;\n    }\n\n    this.setState({ outputs });\n  }\n\n  render() {\n    const { pfunction } = this.props.item;\n    const width = this.props.styles.minWidth - 40;\n    const ioStyles = { minWidth: width, width };\n\n    const ioGapiInputs = this.ioGapiInputs(pfunction);\n    const ioGapiOutputs = this.ioGapiOutputs(pfunction);\n\n    return (\n      <View style={{...this.props.styles, flex: 1, width: this.props.styles.minWidth }}>\n        <CardItem style={{ backgroundColor: pfunctionColor(pfunction.data.gapi) }}>\n          <View style={{ flexDirection: \"row\", alignItems: \"center\" }}>\n            <H1 style={{ paddingRight: 20 }}>{pfunction.data.name}</H1>\n          </View>\n        </CardItem>\n        <Content>\n          <Card>\n            <CardItem header>\n              <Text>Inputs</Text>\n            </CardItem>\n            <CardItem>\n              <IoGapi\n                item={ioGapiInputs}\n                value={this.state.inputs}\n                onValueChange={this.onValueChange}\n                styles={ioStyles}\n              />\n            </CardItem>\n            <CardItem header>\n              <Text>Outputs</Text>\n            </CardItem>\n            <CardItem>\n              <IoGapi\n                item={ioGapiOutputs}\n                readonly={true}\n                value={this.state.outputs}\n                styles={ioStyles}\n              />\n            </CardItem>\n          </Card>\n        </Content>\n        <View style={{\n          flexDirection: \"row\",\n          justifyContent: \"space-between\",\n          alignItems: \"center\",\n          padding: 5,\n          borderTopWidth: 1,\n          borderTopColor: '#cccccc',\n        }}>\n          <Left>\n            <Button small rounded style={styles.buttonStyle} onClick={this.props.onInfoClosed} >\n              <Icon type=\"MaterialCommunityIcons\" name='close' />\n            </Button>\n          </Left>\n          <Right>\n            <Button small rounded style={styles.buttonStyle} onClick={this.onRun} >\n              <Icon type=\"MaterialCommunityIcons\" name='play' />\n            </Button>\n          </Right>\n        </View>\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create(\n  {\n    buttonStyle: {\n      backgroundColor: '#cccccc',\n    },\n  }\n)\n","import React, { Component } from 'react';\nimport './App.css';\nimport { Dimensions, StyleSheet, ScrollView } from 'react-native';\nimport { Container } from 'native-base';\nimport SearchComponent from './components/Search.js';\nimport Workspace from './components/Workspace.js';\nimport { SearchListPClasses, SearchListPfunctions, SearchListPClassesByPclassi} from './components/SearchList.js';\nimport { PclassDetails } from './components/PclassDetails.js';\nimport { PfunctionGapi } from './components/gapi/PfunctionGapi.js';\nimport { buildWhereQueries, buildWhereFx } from './utils/queries.js';\nimport { getWeb3, CHAIN_NAMES } from './utils/web3.js';\n\nconst MIN_WIDTH = 800;\nconst PAGE_LIMIT = 30;\n\n\nfunction getPageSize(noOfPages, {width, height}) {\n  console.log('--dimensions', noOfPages, {width, height});\n  if (width < MIN_WIDTH) return {minWidth: width, minHeight: height};\n\n  // const paddingRight = 3;\n  // width -= paddingLeft * noOfPages;\n  return {minWidth: width / noOfPages, minHeight: height};\n}\n\nclass AppContent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.DEFAULT_FILTER = {skip: 0, limit: PAGE_LIMIT};\n    this.PAGE_NUMBER = 3;\n\n    this.state = {\n      ...this.getWindowDimensions(),\n      pclassWhere: {},\n      pfunctionWhere: {},\n      pclassiWhere: {},\n      filter: Object.assign({}, this.DEFAULT_FILTER),\n      treedata: [],\n      showPclassInfo: null,\n      runPfunction: null,\n      chainid: null,\n    };\n\n    this.scrollRef = React.createRef();\n\n    this.onContentSizeChange = this.onContentSizeChange.bind(this);\n    this.onQueryChange = this.onQueryChange.bind(this);\n    this.onAddListPage = this.onAddListPage.bind(this);\n    this.onPreviousPage = this.onPreviousPage.bind(this);\n    this.onWorkspaceAddItem = this.onWorkspaceAddItem.bind(this);\n    this.onGoToSearch = this.onGoToSearch.bind(this);\n    this.onGoToWorkspace = this.onGoToWorkspace.bind(this);\n    this.onGoToSearchList = this.onGoToSearchList.bind(this);\n    this.onInfo = this.onInfo.bind(this);\n    this.onInfoClosed = this.onInfoClosed.bind(this);\n    this.onPfunctionRun = this.onPfunctionRun.bind(this);\n    this.onWorkspaceRemoveItem = this.onWorkspaceRemoveItem.bind(this);\n\n    Dimensions.addEventListener('change', () => {\n      this.onContentSizeChange();\n    });\n\n    this.setWeb3();\n  }\n\n  async setWeb3() {\n    this.web3 = await getWeb3();\n    const network = await this.web3.provider.getNetwork();\n    this.setState({ chainid: parseInt(network.chainId)});\n  }\n\n  getWindowDimensions() {\n    let wdims = Dimensions.get('window');\n    let rootDims = document.getElementById('ChainLensRoot').getBoundingClientRect();\n\n    const dims = {\n      width: wdims.width || rootDims.width,\n      height: wdims.height || rootDims.height,\n    }\n    return dims;\n  }\n\n  onContentSizeChange() {\n    this.setState(this.getWindowDimensions());\n  }\n\n  onWorkspaceAddItem(item) {\n    let treedata = this.state.treedata;\n    treedata.push(item);\n    this.setState({ treedata });\n  }\n\n  onWorkspaceRemoveItem(item) {\n    let treedata = this.state.treedata;\n    let index = treedata.findIndex(pclass => pclass._id === item._id);\n    treedata.splice(index, 1);\n    this.setState({ treedata });\n  }\n\n  onQueryChange({ genQuery, fxQuery }) {\n    let pclassWhere = {}, pfunctionWhere = {}, pclassiWhere = {};\n\n    if (genQuery.valid) {\n      ({ pclassWhere, pfunctionWhere, pclassiWhere } = buildWhereQueries(genQuery));\n    }\n\n    if (fxQuery.valid) {\n      pfunctionWhere = { ...pfunctionWhere, ...buildWhereFx(fxQuery) };\n    }\n\n    console.log('pclassiWhere', JSON.stringify(pclassiWhere));\n    console.log('pclassWhere', JSON.stringify(pclassWhere));\n    console.log('pfunctionWhere', JSON.stringify(pfunctionWhere));\n    const isChanged = (\n      JSON.stringify(pclassWhere) !== JSON.stringify(this.state.pclassWhere)\n      || JSON.stringify(pfunctionWhere) !== JSON.stringify(this.state.pfunctionWhere)\n      || JSON.stringify(pclassiWhere) !== JSON.stringify(this.state.pclassiWhere)\n    );\n    console.log('isChanged', isChanged);\n    if (isChanged) {\n      const filter = Object.assign({}, this.DEFAULT_FILTER);\n      this.setState({ pclassWhere, pfunctionWhere, pclassiWhere, filter });\n    }\n    this.onGoToSearchList();\n  }\n\n  onAddListPage() {\n    let filter = this.state.filter;\n    filter.skip += PAGE_LIMIT;\n    this.setState({ filter });\n  }\n\n  onPreviousPage() {\n    let filter = this.state.filter;\n    filter.skip -= PAGE_LIMIT;\n    this.setState({ filter });\n  }\n\n  onGoToSearchList() {\n    const {width, height} = this.state;\n    const sizes = getPageSize(this.PAGE_NUMBER, { width, height });\n    this.scrollRef.current.scrollTo({x: sizes.minWidth, y: 0, animated: true});\n  }\n\n  onGoToSearch() {\n    this.scrollRef.current.scrollTo({x: 0, y: 0, animated: true});\n  }\n\n  onGoToWorkspace() {\n    this.scrollRef.current.scrollToEnd();\n  }\n\n  onInfo(item) {\n    this.setState({ showPclassInfo: item, runPfunction: null });\n    this.onGoToWorkspace();\n  }\n\n  onInfoClosed() {\n    this.setState({ showPclassInfo: null, runPfunction: null });\n    this.onGoToSearchList();\n  }\n\n  onPfunctionRun(item) {\n    this.setState({ runPfunction: item, showPclassInfo: null });\n    this.onGoToWorkspace();\n  }\n\n  render() {\n    const {\n      width,\n      height,\n      treedata,\n      showPclassInfo,\n      runPfunction,\n      pclassWhere,\n      pfunctionWhere,\n      pclassiWhere,\n      filter,\n      chainid,\n    } = this.state;\n    const pageStyles = getPageSize(this.PAGE_NUMBER, { width, height });\n    const whereFilters = { pclassWhere, pfunctionWhere, pclassiWhere };\n    const wherekey = Object.keys(pfunctionWhere)[0] || '';\n    const showFunctions = wherekey.includes('data.gapi') || wherekey.includes('data.signature');\n\n    const showByPclassi = (Object.keys(pclassiWhere)[0] || '').includes('address');\n\n    if (chainid) {\n      pclassWhere[\"metadata.chainids\"] = {\"inq\":[chainid]};\n      pfunctionWhere[\"metadata.chainids\"] = {\"inq\":[chainid]};\n      pclassiWhere[\"data.deployment.chainid\"] = chainid;\n    }\n\n    return (\n      <ScrollView\n        ref={this.scrollRef}\n        horizontal={true}\n        pagingEnabled={true}\n        scrollEnabled={true}\n        scrollEventThrottle={100}\n        nestedScrollEnabled={true}\n        contentContainerStyle={{width: \"100%\"}}\n        onContentSizeChange={this.onContentSizeChange}\n      >\n\n        <SearchComponent\n          styles={pageStyles}\n          chain={{ id: chainid, name: CHAIN_NAMES[chainid] }}\n          onQueryChange={this.onQueryChange}\n        />\n\n        {showFunctions\n          ? <SearchListPfunctions\n            whereFilters={whereFilters}\n            whereFilter={pfunctionWhere}\n            filter={filter}\n            styles={pageStyles}\n            treedataLen={treedata.length}\n            onAddListPage={this.onAddListPage}\n            onPreviousPage={this.onPreviousPage}\n            onSelect={this.onWorkspaceAddItem}\n            onGoToSearch={this.onGoToSearch}\n            onGoToWorkspace={this.onGoToWorkspace}\n            onInfo={this.onInfo}\n            onPfunctionRun={this.onPfunctionRun}\n          />\n          : (showByPclassi\n            ? <SearchListPClassesByPclassi\n                whereFilters={whereFilters}\n                whereFilter={pclassiWhere}\n                filter={filter}\n                styles={pageStyles}\n                treedataLen={treedata.length}\n                onAddListPage={this.onAddListPage}\n                onPreviousPage={this.onPreviousPage}\n                onSelect={this.onWorkspaceAddItem}\n                onGoToSearch={this.onGoToSearch}\n                onGoToWorkspace={this.onGoToWorkspace}\n                onInfo={this.onInfo}\n                onPfunctionRun={this.onPfunctionRun}\n              />\n            : <SearchListPClasses\n              whereFilters={whereFilters}\n              whereFilter={pclassWhere}\n              filter={filter}\n              styles={pageStyles}\n              treedataLen={treedata.length}\n              onAddListPage={this.onAddListPage}\n              onPreviousPage={this.onPreviousPage}\n              onSelect={this.onWorkspaceAddItem}\n              onGoToSearch={this.onGoToSearch}\n              onGoToWorkspace={this.onGoToWorkspace}\n              onInfo={this.onInfo}\n              onPfunctionRun={this.onPfunctionRun}\n            />\n          )\n        }\n        {showPclassInfo\n          ? <PclassDetails\n              styles={pageStyles}\n              pclass={showPclassInfo}\n              onInfoClosed={this.onInfoClosed}\n            />\n          : (\n            runPfunction\n            ? <PfunctionGapi\n                key={runPfunction.pfunction._id}\n                styles={pageStyles}\n                item={runPfunction}\n                onInfoClosed={this.onInfoClosed}\n              />\n            : <Workspace\n              treedata={treedata}\n              styles={pageStyles}\n              onGoToSearchList={this.onGoToSearchList}\n              onRemove={this.onWorkspaceRemoveItem}\n            />\n          )\n        }\n      </ScrollView>\n    )\n  }\n}\n\nfunction App() {\n  return (\n      <Container style={ styles.container } >\n\n        <AppContent />\n\n      </Container>\n  );\n}\n\nexport default App;\n\nconst styles = StyleSheet.create(\n  {\n    buttonStyle: {\n      backgroundColor: '#cccccc',\n    },\n    container: {\n      width: '100%',\n      height: '100%',\n    },\n  }\n)\n","export const buildWhereQueries = (genQuery) => {\n  let pclassWhere = {};\n  let pfunctionWhere = {};\n  let pclassiWhere = {};\n\n  if (!genQuery.text) return { pclassWhere, pfunctionWhere, pclassiWhere };\n\n  switch(genQuery.field) {\n    case 'name':\n      pclassWhere['data.name'] = {like: genQuery.text, options: 'i'};\n      pfunctionWhere['data.name'] = {like: genQuery.text, options: 'i'};\n      break;\n    case 'address':\n      pclassiWhere['data.deployment.address'] = genQuery.text;\n      break;\n    case 'signature':\n      pfunctionWhere['data.signature'] = genQuery.text;\n      break;\n    default:\n      console.error('Invalid search parameters: ', genQuery);\n      break;\n  }\n  return { pclassWhere, pfunctionWhere, pclassiWhere };\n}\n\nexport const buildWhereFx = (fxQuery) => {\n  let pfunctionWhere = {};\n\n  if (!fxQuery.text) return pfunctionWhere;\n\n  pfunctionWhere[`data.gapi.${fxQuery.field}`] = {\n    inq:[{ type: fxQuery.text }]\n  }\n  return pfunctionWhere;\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'roboto-fontface/css/roboto-condensed/roboto-condensed-fontface.css';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('ChainLensRoot'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}