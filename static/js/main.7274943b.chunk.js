(this["webpackJsonpcontract-finder-client"]=this["webpackJsonpcontract-finder-client"]||[]).push([[0],{271:function(e,t,n){e.exports=n(460)},277:function(e,t,n){},279:function(e,t,n){},460:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(44),c=n.n(r),l=(n(276),n(277),n(17)),i=n.n(l),s=n(27),u=n(9),d=n(14),m=n(15),p=n(5),h=n(19),y=n(18),f=(n(279),n(45)),g=n(50),b=n(8),v=n(2),E=function(e){Object(h.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={text:"",field:"name",valid:!0},a.onChangeText=a.onChangeText.bind(Object(p.a)(a)),a}return Object(m.a)(n,[{key:"onChangeText",value:function(e){var t=function(e){return"0x"===e.slice(0,2)?42===e.length?{field:"address",valid:!0}:10===e.length?{field:"signature",valid:!0}:{field:"unknown",valid:!1}:{field:"name",valid:!0}}(e);this.setState(Object(u.a)({text:e},t)),t.valid&&this.props.onQueryChange(Object(u.a)({text:e},t))}},{key:"render",value:function(){var e=this;return o.a.createElement(v.Item,{error:!this.state.valid},o.a.createElement(v.Icon,{name:"search"}),o.a.createElement(v.Input,{placeholder:"name / address / signature",onChangeText:function(t){return e.onChangeText(t)}}))}}]),n}(a.Component),C=function(e){Object(h.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={field:"inputs",text:"",valid:!0},a.onChangeText=a.onChangeText.bind(Object(p.a)(a)),a.onFieldSelect=a.onFieldSelect.bind(Object(p.a)(a)),a}return Object(m.a)(n,[{key:"onChangeText",value:function(e){this.setState({text:e}),this.props.onQueryChange(Object(u.a)(Object(u.a)({},this.state),{},{text:e}))}},{key:"onFieldSelect",value:function(e){this.setState({field:e}),this.props.onQueryChange(Object(u.a)(Object(u.a)({},this.state),{},{field:e}))}},{key:"render",value:function(){var e=this;return o.a.createElement(v.View,null,o.a.createElement(v.Item,null,o.a.createElement(v.Icon,{name:"search"}),o.a.createElement(v.Input,{placeholder:"type: address / uint256 / ...",onChangeText:function(t){return e.onChangeText(t)}})),o.a.createElement(v.Content,null,o.a.createElement(v.ListItem,{selected:"inputs"===this.state.field,onClick:function(){return e.onFieldSelect("inputs")}},o.a.createElement(v.Radio,{selected:"inputs"===this.state.field}),o.a.createElement(v.Body,null,o.a.createElement(v.Text,{style:{fontFamily:null}},"input"))),o.a.createElement(v.ListItem,{selected:"outputs"===this.state.field,onClick:function(){return e.onFieldSelect("outputs")}},o.a.createElement(v.Radio,{selected:"outputs"===this.state.field}),o.a.createElement(v.Body,null,o.a.createElement(v.Text,{style:{fontFamily:null}},"output")))))}}]),n}(a.Component),k=function(e){Object(h.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={genQuery:{text:"",field:"name"},fxQuery:{text:"",field:"inputs"}},a.onQueryChangeGeneral=a.onQueryChangeGeneral.bind(Object(p.a)(a)),a.onQueryChangeFx=a.onQueryChangeFx.bind(Object(p.a)(a)),a.onSearch=a.onSearch.bind(Object(p.a)(a)),a}return Object(m.a)(n,[{key:"onQueryChangeGeneral",value:function(e){this.setState({genQuery:e})}},{key:"onQueryChangeFx",value:function(e){this.setState({fxQuery:e})}},{key:"onSearch",value:function(){this.props.onQueryChange(this.state)}},{key:"render",value:function(){return o.a.createElement(v.View,{style:Object(u.a)(Object(u.a)({},this.props.styles),{},{flex:1})},o.a.createElement(v.Content,null,o.a.createElement(E,{onQueryChange:this.onQueryChangeGeneral}),o.a.createElement(v.Separator,{bordered:!0}),o.a.createElement(C,{onQueryChange:this.onQueryChangeFx})),o.a.createElement(v.View,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-end",padding:5,borderTopWidth:1,borderTopColor:"#cccccc"}},o.a.createElement(v.Left,null,o.a.createElement(v.Button,{small:!0,rounded:!0,style:{backgroundColor:"#cccccc"},onClick:this.onSearch},o.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"import"}))),o.a.createElement(v.Text,null,"Network: ",this.props.chain.name)))}}]),n}(a.Component),I=n(268),O=Object(I.createIframeClient)();function w(){return(w=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.onload();case 2:console.log("exportToRemix",t),t.forEach((function(e){S(e)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(s.a)(i.a.mark((function e(){var t,n,a=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.length>0&&void 0!==a[0]?a[0]:[],n=a.length>1?a[1]:void 0,t instanceof Array||(t=[t]);try{O.call(n,"loadChainLensWorkspace",t)}catch(o){console.error("exportToPlugin failed",n,o)}case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return j.apply(this,arguments)}function j(){return(j=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("sourceByLanguage",t.data.sourceByLanguage),t.data.sourceByLanguage&&t.data.sourceByLanguage[0]){e.next=3;break}return e.abrupt("return");case 3:n=t.data.sourceByLanguage[0].sourcesTemp,Object.keys(n).forEach((function(e){var t="browser/".concat(e);t.includes(".sol")||(t+=".sol"),O.call("fileManager","setFile",t,n[e])}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=n(169),P=function(e){var t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)};var W={event:"#C9DEBB",payable:"#CDE0F2",nonconstant:"#E9DEDE",constant:"rgb(240, 239, 245)"};function L(e){var t=function(e){return"event"===e.type?"event":e.payable?"payable":e.constant?"constant":"nonconstant"}(e);return W[t]}var V=function(e){Object(h.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e))._renderHeader=a._renderHeader.bind(Object(p.a)(a)),a._renderContent=a._renderContent.bind(Object(p.a)(a)),a._renderListItem=a._renderListItem.bind(Object(p.a)(a)),a}return Object(m.a)(n,[{key:"_renderHeader",value:function(e,t){var n=this.props.buttons.header.map((function(t,n){return o.a.createElement(v.Button,{small:!0,rounded:!0,style:B.buttonStyle,key:n,onClick:function(){return t.callback(e)}},o.a.createElement(v.Icon,{type:t.icon.type,name:t.icon.name}))}));return o.a.createElement(v.View,{style:{padding:5,flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"#fafafa"}},o.a.createElement(v.View,{style:{flexDirection:"row"}},t?o.a.createElement(v.Icon,{style:{fontSize:18},name:"remove-circle"}):o.a.createElement(v.Icon,{style:{fontSize:18},name:"add-circle"}),o.a.createElement(v.Text,{style:{fontFamily:null,fontWeight:"400",paddingLeft:10,maxWidth:this.props.styles.minWidth-160}},e.data.name)),o.a.createElement(v.View,{style:{flexDirection:"row"}},n))}},{key:"_renderContent",value:function(e){var t=this,n=[];return(e.pfunctions||[]).forEach((function(a){if(a.data.name){var r=a.data.signatureString;a.data.gapi.outputs&&a.data.gapi.outputs.length>0&&(r+="->(".concat(a.data.gapi.outputs.map((function(e){return e.type})).join(","),")"));var c=t.props.buttons.contentItem.map((function(t,n){return o.a.createElement(v.Button,{small:!0,rounded:!0,style:B.buttonStyle,key:n,onClick:function(){return t.callback({pfunction:a,pclass:e})}},o.a.createElement(v.Icon,{type:t.icon.type,name:t.icon.name}))}));n.push(o.a.createElement(v.ListItem,{key:a._id,style:{backgroundColor:L(a.data.gapi)}},o.a.createElement(v.Left,null,o.a.createElement(v.View,{style:{flexDirection:"row",alignItems:"center"}},"event"===a.data.gapi.type?o.a.createElement(v.Thumbnail,{source:{uri:"/event.png"},style:{height:15,width:15,borderRadius:5}}):o.a.createElement(v.Thumbnail,{source:{uri:"/lambda.png"},style:{height:15,width:15,borderRadius:5}}),o.a.createElement(v.Text,{style:{fontFamily:null,paddingLeft:10,maxWidth:t.props.styles.minWidth-170}},r))),o.a.createElement(v.Right,null,c)))}})),o.a.createElement(v.List,{style:{paddingLeft:15}},n)}},{key:"_renderListItem",value:function(e){var t=e.item;e.index,e.separators;return o.a.createElement(v.Accordion,{dataArray:[t],keyExtractor:function(e){return e._id},renderHeader:this._renderHeader,renderContent:this._renderContent,contentStyle:{flex:1,backgroundColor:"#ffffff"}})}},{key:"render",value:function(){var e=this.props.data;return o.a.createElement(T.a,{data:e,keyExtractor:function(e){return e._id},renderItem:this._renderListItem,scrollEnabled:!0,scrollEventThrottle:300,contentStyle:{flex:1,backgroundColor:"#ffffff"}})}}]),n}(a.Component),B=b.a.create({buttonStyle:{backgroundColor:"#cccccc",marginLeft:15}}),R=function(e){Object(h.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={selected:"remix"},a.onValueChange=a.onValueChange.bind(Object(p.a)(a)),a.exportTo=a.exportTo.bind(Object(p.a)(a)),a}return Object(m.a)(n,[{key:"onValueChange",value:function(e){this.setState({selected:e})}},{key:"exportTo",value:function(e){var t=this.state.selected,n=e?[e]:this.props.treedata;"remix"===t?function(e){w.apply(this,arguments)}(n):function(){x.apply(this,arguments)}(n,"pipeline")}},{key:"render",value:function(){var e=this.props,t={header:[{callback:e.onRemove,icon:{type:"FontAwesome",name:"close"}},{callback:this.exportTo,icon:{type:"MaterialCommunityIcons",name:"import"}}],contentItem:[]};return o.a.createElement(v.View,{style:Object(u.a)(Object(u.a)({},e.styles),{},{flex:1})},o.a.createElement(V,{data:e.treedata,buttons:t,styles:e.styles}),o.a.createElement(v.View,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:5,borderTopWidth:1,borderTopColor:"#cccccc"}},o.a.createElement(v.Left,null,o.a.createElement(v.Button,{small:!0,rounded:!0,style:G.buttonStyle,onClick:e.onGoToSearchList},o.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"chevron-left"}))),o.a.createElement(v.Picker,{mode:"dropdown",style:{width:0,marginRight:10},selectedValue:this.state.selected,onValueChange:this.onValueChange},o.a.createElement(v.Picker.Item,{label:"FileManager",value:"remix"}),o.a.createElement(v.Picker.Item,{label:"Pipeline",value:"pipeline"}),o.a.createElement(v.Picker.Item,{label:"JSON",value:"json"})),o.a.createElement(v.Right,null,o.a.createElement(v.Button,{small:!0,rounded:!0,style:G.buttonStyle,onClick:this.exportTo},o.a.createElement(v.Text,null,e.treedata.length),o.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"import"})))))}}]),n}(a.Component),G=b.a.create({buttonStyle:{backgroundColor:"#cccccc"}}),A={host:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_PIPEOS_SERVER||"https://chainlens.herokuapp.com",route:{pclass:"/pclass",pfunction:"/pfunction"}};console.log("PIPEOS_SERVER",A);var _=n(269),F=n(165),D={revalidateOnFocus:!1,revalidateOnReconnect:!1,dedupingInterval:2e4,focusThrottleInterval:5e5,loadingTimeout:5e3,errorRetryInterval:1e4},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pclass",n=[];return"pclass"===t&&(n=[{relation:"pfunctions"},{relation:"pclassInstances"}]),"pfunction"===t&&(n=[{relation:"pclass"}]),"pclassi"===t&&(n=[{relation:"pclass",scope:{include:[{relation:"pfunctions"}]}}]),e=Object(u.a)(Object(u.a)({},e),{},{include:n}),console.log("filter",e,JSON.stringify(e)),"".concat(A.host,"/").concat(t,"?filter=").concat(JSON.stringify(e))},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return console.log("pclassCount",e.where,JSON.stringify(e.where)),"".concat(A.host,"/").concat(t,"/count?where=").concat(JSON.stringify(e.where))};function H(e){return J.apply(this,arguments)}function J(){return(J=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("!! fetcher"),e.next=3,Object(_.a)(t);case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pclass";return Object(F.a)(N(e,t),H,D)}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pclass";return Object(F.a)(M(e,t),H,D)}function U(e){return o.a.createElement(v.View,{style:Object(u.a)(Object(u.a)({},e.styles),{},{flex:1})},o.a.createElement(V,{data:e.data,buttons:e.buttons,styles:e.styles}),o.a.createElement(v.View,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:5,borderTopWidth:1,borderTopColor:"#cccccc"}},o.a.createElement(v.Button,{small:!0,rounded:!0,style:X.buttonStyle,onClick:e.onGoToSearch},o.a.createElement(v.Icon,{name:"search"}),o.a.createElement(v.Text,null,e.resultsCount)),o.a.createElement(v.View,{style:{flexDirection:"row",alignItems:"center"}},o.a.createElement(v.Button,{small:!0,rounded:!0,style:X.buttonStyle,onClick:e.onPreviousPage},o.a.createElement(v.Icon,{type:"FontAwesome",name:"caret-left"})),o.a.createElement(v.Text,null,"@",(e.filter.skip||0)+1),o.a.createElement(v.Button,{small:!0,rounded:!0,style:X.buttonStyle,onClick:e.onAddListPage},o.a.createElement(v.Icon,{type:"FontAwesome",name:"caret-right"}))),o.a.createElement(v.Button,{small:!0,rounded:!0,style:X.buttonStyle,onClick:e.onGoToWorkspace},o.a.createElement(v.Text,null,e.treedataLen||0),o.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"import"}))))}function q(e){var t=e.whereFilter,n=e.filter;n.where=t,console.log("!!!!!!!! SearchListPClasses !!!!!!!");var a=Q(n,"pclass"),r=a.data,c=a.error,l=z(n,"pclass").data,i=l?l.count:0;if(c)return o.a.createElement("div",null,"failed to load");if(!r)return o.a.createElement("div",null,"loading...");console.log("data",r),console.log("count",i);var s={header:[{callback:e.onInfo,icon:{type:"FontAwesome",name:"info"}},{callback:e.onSelect,icon:{type:"MaterialCommunityIcons",name:"import"}}],contentItem:[{callback:e.onPfunctionRun,icon:{type:"MaterialCommunityIcons",name:"play"}}]};return o.a.createElement(U,{data:r,resultsCount:i,filter:n,styles:e.styles,buttons:s,onGoToSearch:e.onGoToSearch,onPreviousPage:e.onPreviousPage,onAddListPage:e.onAddListPage,onGoToWorkspace:e.onGoToWorkspace,treedataLen:e.treedataLen})}function $(e){var t=e.whereFilter,n=e.filter;n.where=t,console.log("!!!!!!!! SearchListPClassesByPclassi !!!!!!!",JSON.stringify(n));var a=Q(n,"pclassi"),r=a.data,c=a.error,l=z(n,"pclassi").data,i=l?l.count:0;if(c)return o.a.createElement("div",null,"failed to load");if(!r)return o.a.createElement("div",null,"loading...");var s=r.map((function(e){var t=e.pclass;return t.pclassInstances=[e],t}));console.log("data",s),console.log("count",i);var u={header:[{callback:e.onInfo,icon:{type:"FontAwesome",name:"info"}},{callback:e.onSelect,icon:{type:"MaterialCommunityIcons",name:"import"}}],contentItem:[{callback:e.onPfunctionRun,icon:{type:"MaterialCommunityIcons",name:"play"}}]};return o.a.createElement(U,{data:s,resultsCount:i,filter:n,styles:e.styles,buttons:u,onGoToSearch:e.onGoToSearch,onPreviousPage:e.onPreviousPage,onAddListPage:e.onAddListPage,onGoToWorkspace:e.onGoToWorkspace,treedataLen:e.treedataLen})}function K(e){var t=e.whereFilter,n=e.filter;n.where=t,n.limit=300,console.log("!!!!!!!! SearchListPfunctions !!!!!!!");var a=Q(n,"pfunction"),r=a.data,c=a.error,l=z(n,"pfunction").data,i=l?l.count:0;if(c)return console.error(c),o.a.createElement("div",null,"failed to load");if(r instanceof Object&&r.error)return console.error(r.error),o.a.createElement("div",null,"failed to load");if(!r)return o.a.createElement("div",null,"loading...");var s={},u=[];(r||[]).forEach((function(e){var t=e.pclass;console.log("pclass._id",t._id,s[t._id]),s[t._id]||0===s[t._id]?u[s[t._id]].pfunctions.push(e):(t.pfunctions=[e],s[t._id]=u.length,u.push(t))})),console.log("data",u.length,u.slice(0,3)),console.log("count",i);var d={header:[{callback:e.onInfo,icon:{type:"FontAwesome",name:"info"}},{callback:e.onSelect,icon:{type:"MaterialCommunityIcons",name:"import"}}],contentItem:[{callback:e.onPfunctionRun,icon:{type:"MaterialCommunityIcons",name:"play"}}]};return o.a.createElement(U,{data:u,resultsCount:i,filter:n,styles:e.styles,buttons:d,onGoToSearch:e.onGoToSearch,onPreviousPage:e.onPreviousPage,onAddListPage:e.onAddListPage,onGoToWorkspace:e.onGoToWorkspace,treedataLen:e.treedataLen})}var X=b.a.create({buttonStyle:{backgroundColor:"#cccccc"}}),Y=n(82),Z=function(){var e=Object(s.a)(i.a.mark((function e(){var t,n,a,o=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:"ropsten",!window.ethereum){e.next=15;break}return e.prev=2,e.next=5,window.ethereum.enable();case 5:n=new Y.ethers.providers.Web3Provider(window.ethereum),a=n.getSigner(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("User rejected dApp connection"),n=Y.ethers.getDefaultProvider(t);case 13:e.next=17;break;case 15:console.log("Non-Ethereum browser detected. Consider trying MetaMask!"),n=Y.ethers.getDefaultProvider(t);case 17:return window.provider=n,e.abrupt("return",{provider:n,signer:a});case 19:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),ee={1:"mainnet",3:"ropsten",4:"rinkeby",5:"goerli",42:"kovan"},te=function(e){var t=ee[e];return 1===e?t="":t+=".","https://".concat(t,"etherscan.io")},ne=function(e,t){return"".concat(te(e),"/tx/").concat(t)},ae={name:"receipt",type:"tuple",components:[{name:"etherscan",type:"link"},{name:"hash",type:"string"},{name:"blockHash",type:"string"},{name:"blockNumber",type:"uint256"},{name:"confirmations",type:"uint256"}]},oe={name:"receipt",type:"tuple",components:[{name:"etherscan",type:"link"},{name:"transactionHash",type:"string"},{name:"blockHash",type:"string"},{name:"blockNumber",type:"uint256"},{name:"confirmations",type:"uint256"}]};function re(e){var t=e.pclass,n=t.data,a={minWidth:e.styles.minWidth-40,minHeight:150},r=(t.pclassInstances||[]).map((function(e){var t,n,r=e.data.deployment,c=(t=r.chainid,n=r.address,"".concat(te(t),"/address/").concat(n,"#code"));return o.a.createElement(v.View,{key:e._id,style:{flexDirection:"column"}},o.a.createElement(v.View,null,o.a.createElement(v.Text,{accessibilityRole:"link",href:c,style:{color:"blue"},target:"_blank"},c)),o.a.createElement(v.View,{style:{flexDirection:"row",alignItems:"center"}},o.a.createElement(v.Button,{transparent:!0,small:!0,onClick:function(){return P(r.chainid)}},o.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"content-copy",style:ce.clipboardBtn})),o.a.createElement(v.Text,{style:ce.deploymentField},"Chain ID: "),o.a.createElement(v.Text,{style:ce.deploymentValues}," ",r.chainid)),o.a.createElement(v.View,{style:{flexDirection:"row",alignItems:"center"}},o.a.createElement(v.Button,{transparent:!0,small:!0,onClick:function(){return P(r.block)}},o.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"content-copy",style:ce.clipboardBtn})),o.a.createElement(v.Text,{style:ce.deploymentField},"Block: "),o.a.createElement(v.Text,{style:ce.deploymentValues}," ",r.block)),o.a.createElement(v.View,{style:{flexDirection:"column"}},o.a.createElement(v.View,{style:{flexDirection:"row",alignItems:"center"}},o.a.createElement(v.Button,{transparent:!0,small:!0,onClick:function(){return P(r.address)}},o.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"content-copy",style:ce.clipboardBtn})),o.a.createElement(v.Text,{style:ce.deploymentField},"Address: ")),o.a.createElement(v.Textarea,{style:Object(u.a)(Object(u.a)({},a),{},{height:40,minHeight:40}),disabled:!0,bordered:!0,value:r.address})),o.a.createElement(v.View,{style:{flexDirection:"column"}},o.a.createElement(v.View,{style:{flexDirection:"row",alignItems:"center"}},o.a.createElement(v.Button,{transparent:!0,small:!0,onClick:function(){return P(r.txhash)}},o.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"content-copy",style:ce.clipboardBtn})),o.a.createElement(v.Text,{style:ce.deploymentField},"Transaction Hash: ")),o.a.createElement(v.Textarea,{style:Object(u.a)(Object(u.a)({},a),{},{height:40,minHeight:40}),disabled:!0,bordered:!0,value:r.txhash})),r.constructorArgs?o.a.createElement(v.View,{style:{flexDirection:"column"}},o.a.createElement(v.View,{style:{flexDirection:"row",alignItems:"center"}},o.a.createElement(v.Button,{transparent:!0,small:!0,onClick:function(){return P(r.constructorArgs)}},o.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"content-copy",style:ce.clipboardBtn})),o.a.createElement(v.Text,{style:ce.deploymentField},"Constructor Arguments: ")),o.a.createElement(v.Textarea,{style:Object(u.a)(Object(u.a)({},a),{},{minHeight:60}),disabled:!0,bordered:!0,value:r.constructorArgs})):o.a.createElement(o.a.Fragment,null))}));return o.a.createElement(v.View,{style:Object(u.a)(Object(u.a)({},e.styles),{},{flex:1,width:e.styles.minWidth})},o.a.createElement(v.CardItem,{header:!0},o.a.createElement(v.H1,null,n.name)),o.a.createElement(v.Content,null,o.a.createElement(v.Card,null,o.a.createElement(v.CardItem,{header:!0},o.a.createElement(v.H3,null,"Deployment:")),o.a.createElement(v.CardItem,null,o.a.createElement(v.Body,null,r)),o.a.createElement(v.CardItem,null,o.a.createElement(v.Body,null,o.a.createElement(v.View,{style:{flexDirection:"row",alignItems:"center"}},o.a.createElement(v.Button,{transparent:!0,small:!0,onClick:function(){return P(JSON.stringify(n.gapi))}},o.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"content-copy",style:ce.clipboardBtn})),o.a.createElement(v.H3,null,"ABI")),o.a.createElement(v.Textarea,{style:a,disabled:!0,bordered:!0,value:JSON.stringify(n.gapi)}))),o.a.createElement(v.CardItem,null,o.a.createElement(v.Body,null,o.a.createElement(v.View,{style:{flexDirection:"row",alignItems:"center"}},o.a.createElement(v.Button,{transparent:!0,small:!0,onClick:function(){return P(JSON.stringify(n.natspec))}},o.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"content-copy",style:ce.clipboardBtn})),o.a.createElement(v.H3,null,"Natspec")),o.a.createElement(v.Textarea,{style:a,disabled:!0,bordered:!0,value:JSON.stringify(n.natspec)}))),o.a.createElement(v.CardItem,null,o.a.createElement(v.Body,null,o.a.createElement(v.View,{style:{flexDirection:"row",alignItems:"center"}},o.a.createElement(v.Button,{transparent:!0,small:!0,onClick:function(){return P(JSON.stringify(n.sourceByLanguage[0].compiler))}},o.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"content-copy",style:ce.clipboardBtn})),o.a.createElement(v.H3,null,"Compiler")),o.a.createElement(v.Textarea,{style:a,disabled:!0,bordered:!0,value:JSON.stringify(n.sourceByLanguage[0].compiler)}))),o.a.createElement(v.CardItem,null,o.a.createElement(v.Body,null,o.a.createElement(v.View,{style:{flexDirection:"row",alignItems:"center"}},o.a.createElement(v.Button,{transparent:!0,small:!0,onClick:function(){return P(n.sourceByLanguage[0].compilerOutput.runtime.bytecode)}},o.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"content-copy",style:ce.clipboardBtn})),o.a.createElement(v.H3,null,"Runtime Bytecode")),o.a.createElement(v.Textarea,{style:a,disabled:!0,bordered:!0,value:n.sourceByLanguage[0].compilerOutput.runtime.bytecode}))))),o.a.createElement(v.View,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:5,borderTopWidth:1,borderTopColor:"#cccccc"}},o.a.createElement(v.Left,null,o.a.createElement(v.Button,{small:!0,rounded:!0,style:ce.buttonStyle,onClick:e.onInfoClosed},o.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"close"})))))}var ce=b.a.create({deploymentField:{fontWeight:600},deploymentValues:{fontFamily:"monospace"},buttonStyle:{backgroundColor:"#cccccc",marginRight:15},clipboardBtn:{color:"#000000"}}),le=n(35),ie=["int","float","tuple","boolean"],se=function(e){return e||""},ue=function(e){return e||""},de=function(e){return e?JSON.parse(e):null},me=function(e){return e?JSON.stringify(e):""};function pe(e){var t,n,a,r=e.item;return(t=r.type,ie.find((function(e){return t.includes(e)})))?(n=de,a=me):(n=se,a=ue),console.log("encodeValue",a(e.value)),"link"===r.type?o.a.createElement(v.Text,{accessibilityRole:"link",href:e.value,style:{color:"blue"},target:"_blank"},e.value):o.a.createElement(v.Input,{value:a(e.value),onChangeText:function(t){return e.onValueChange(n(t))},styles:e.styles,disabled:e.readonly})}var he=function(e){Object(h.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={componentsOpened:!1,componentValues:e.value},a.onComponentsValueChange=a.onComponentsValueChange.bind(Object(p.a)(a)),a.onOpenComponents=a.onOpenComponents.bind(Object(p.a)(a)),a._renderHeader=a._renderHeader.bind(Object(p.a)(a)),a._renderContent=a._renderContent.bind(Object(p.a)(a)),a}return Object(m.a)(n,[{key:"getLabel",value:function(e){return e.label||"".concat(e.name,":").concat(e.type)}},{key:"onOpenComponents",value:function(){console.log("onOpenComponents"),this.setState({componentsOpened:!0})}},{key:"onComponentsValueChange",value:function(e,t){console.log("IoGapi onComponentsValueChange",e,t);var n=this.state.componentValues;n[t]=e,this.setState({componentValues:n}),this.props.onValueChange(n)}},{key:"_renderHeader",value:function(e,t){var n=this.getLabel(e);return o.a.createElement(v.View,{style:Object(u.a)({padding:5,flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"#fafafa"},this.props.styles)},o.a.createElement(v.View,{style:Object(u.a)(Object(u.a)({},this.props.styles),{},{flexDirection:"row"})},t?o.a.createElement(v.Icon,{style:{fontSize:18},name:"remove-circle"}):o.a.createElement(v.Icon,{style:{fontSize:18},name:"add-circle"}),o.a.createElement(v.Item,{stackedLabel:!0,style:Object(u.a)(Object(u.a)({},this.props.styles),{},{maxWidth:this.props.styles.minWidth})},o.a.createElement(v.Label,null,n),o.a.createElement(pe,{item:e,value:this.props.value,onValueChange:this.props.onValueChange,styles:this.props.styles,readonly:this.props.readonly}))))}},{key:"_renderContent",value:function(e){var t=this;return(e.components||[]).map((function(e,a){return o.a.createElement(n,{key:a,styles:t.props.styles,item:e,value:t.props.value[a],onValueChange:function(e){return t.onComponentsValueChange(e,a)},readonly:t.props.readonly})}))}},{key:"render",value:function(){var e=this.props,t=e.item,n=e.styles,a=e.readonly;if(!t)return o.a.createElement(v.Text,null,"---");var r=this.getLabel(t);return o.a.createElement(v.View,{style:Object(u.a)(Object(u.a)({},n),{},{flexDirection:"row",alignItems:"center"})},t.components&&0!==t.components.length?o.a.createElement(v.Accordion,{dataArray:[t],expanded:0,renderHeader:this._renderHeader,renderContent:this._renderContent,contentStyle:Object(u.a)(Object(u.a)({},n),{},{flex:1,backgroundColor:"#ffffff"})}):o.a.createElement(v.Item,{stackedLabel:!0,style:{width:"100%"}},o.a.createElement(v.Label,null,r),o.a.createElement(pe,{styles:n,item:t,value:this.props.value,onValueChange:this.props.onValueChange,readonly:a})))}}]),n}(a.Component);var ye=function(e){Object(h.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={inputs:a.initInputsState(),outputs:a.initOutputsState()},a.onValueChange=a.onValueChange.bind(Object(p.a)(a)),a.onRun=a.onRun.bind(Object(p.a)(a)),a}return Object(m.a)(n,[{key:"initInputsState",value:function(){var e=this.props.item.pfunction,t=this.ioGapiInputs(e);return t&&t.components?new Array(t.components.length):[]}},{key:"initOutputsState",value:function(){var e=this.props.item.pfunction;return function e(t){if(!t||!t.components)return[];var n=new Array(t.components.length);return t.components.forEach((function(t,a){t.components&&(n[a]=e(t))})),n}(this.ioGapiOutputs(e))}},{key:"typesig",value:function(e){var t="";return e.name&&(t+="".concat(e.name,":")),t+=e.type}},{key:"ioGapiInputs",value:function(e){var t=this,n="(".concat(e.data.gapi.inputs.map((function(e){return t.typesig(e)})).join(","),")");return e.data.gapi.inputs.length>0?{name:e.data.signatureString,type:"tuple",components:e.data.gapi.inputs,label:n}:null}},{key:"ioGapiOutputs",value:function(e){var t=this,n=JSON.parse(JSON.stringify(e.data.gapi.outputs||[])),a="(".concat(n.map((function(e){return t.typesig(e)})).join(","),")");return"payable"!==e.data.gapi.stateMutability&&"nonpayable"!==e.data.gapi.stateMutability||(n=ae.components,a="receipt(".concat(n.map((function(e){return t.typesig(e)})).join(","),")")),n.length>0?{name:e.data.signatureString,type:"tuple",components:n,label:a}:null}},{key:"onValueChange",value:function(e){console.log("--- onValueChange",e),this.setState({inputs:e})}},{key:"onRun",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t,n,a,o,r,c,l,s,u,d,m,p,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.item,n=t.pclass,a=t.pfunction,o=n.pclassInstances,e.next=4,Z();case 4:return r=e.sent,c=r.provider,l=r.signer,e.next=9,c.getNetwork();case 9:return s=e.sent.chainId,console.log("this.state.inputs",this.state.inputs),u=o.find((function(e){return e.data.deployment.chainid===s||e.data.deployment.chainid===parseInt(s)})),d=new Y.ethers.Contract(u.data.deployment.address,n.data.gapi,l),e.next=15,d[a.data.name].apply(d,Object(le.a)(this.state.inputs));case 15:if(m=e.sent,console.log("result",m),p=m instanceof Array?m:[m],"payable"!==a.data.gapi.stateMutability&&"nonpayable"!==a.data.gapi.stateMutability){e.next=28;break}return p=ae.components.map((function(e){return"etherscan"===e.name?ne(u.data.deployment.chainid,m.hash):m[e.name]?m[e.name]:"waiting"})),this.setState({outputs:p}),e.next=23,m.wait(2);case 23:return h=e.sent,console.log("receipt",h),p=oe.components.map((function(e){return"etherscan"===e.name?ne(u.data.deployment.chainid,h.transactionHash):h[e.name]})),this.setState({outputs:p}),e.abrupt("return");case 28:this.setState({outputs:p});case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.item.pfunction,t=this.props.styles.minWidth-40,n={minWidth:t,width:t},a=this.ioGapiInputs(e),r=this.ioGapiOutputs(e);return o.a.createElement(v.View,{style:Object(u.a)(Object(u.a)({},this.props.styles),{},{flex:1,width:this.props.styles.minWidth})},o.a.createElement(v.CardItem,{style:{backgroundColor:L(e.data.gapi)}},o.a.createElement(v.View,{style:{flexDirection:"row",alignItems:"center"}},o.a.createElement(v.H1,{style:{paddingRight:20}},e.data.name))),o.a.createElement(v.Content,null,o.a.createElement(v.Card,null,o.a.createElement(v.CardItem,{header:!0},o.a.createElement(v.Text,null,"Inputs")),o.a.createElement(v.CardItem,null,o.a.createElement(he,{item:a,value:this.state.inputs,onValueChange:this.onValueChange,styles:n})),o.a.createElement(v.CardItem,{header:!0},o.a.createElement(v.Text,null,"Outputs")),o.a.createElement(v.CardItem,null,o.a.createElement(he,{item:r,readonly:!0,value:this.state.outputs,styles:n})))),o.a.createElement(v.View,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:5,borderTopWidth:1,borderTopColor:"#cccccc"}},o.a.createElement(v.Left,null,o.a.createElement(v.Button,{small:!0,rounded:!0,style:fe.buttonStyle,onClick:this.props.onInfoClosed},o.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"close"}))),o.a.createElement(v.Right,null,o.a.createElement(v.Button,{small:!0,rounded:!0,style:fe.buttonStyle,onClick:this.onRun},o.a.createElement(v.Icon,{type:"MaterialCommunityIcons",name:"play"})))))}}]),n}(a.Component),fe=b.a.create({buttonStyle:{backgroundColor:"#cccccc"}});function ge(e,t){var n=t.width,a=t.height;return console.log("--dimensions",e,{width:n,height:a}),n<800?{minWidth:n,minHeight:a}:{minWidth:n/e,minHeight:a}}var be=function(e){Object(h.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).DEFAULT_FILTER={skip:0,limit:30},a.PAGE_NUMBER=3,a.state=Object(u.a)(Object(u.a)({},a.getWindowDimensions()),{},{pclassWhere:{},pfunctionWhere:{},pclassiWhere:{},filter:Object.assign({},a.DEFAULT_FILTER),treedata:[],showPclassInfo:null,runPfunction:null,chainid:null}),a.scrollRef=o.a.createRef(),a.onContentSizeChange=a.onContentSizeChange.bind(Object(p.a)(a)),a.onQueryChange=a.onQueryChange.bind(Object(p.a)(a)),a.onAddListPage=a.onAddListPage.bind(Object(p.a)(a)),a.onPreviousPage=a.onPreviousPage.bind(Object(p.a)(a)),a.onWorkspaceAddItem=a.onWorkspaceAddItem.bind(Object(p.a)(a)),a.onGoToSearch=a.onGoToSearch.bind(Object(p.a)(a)),a.onGoToWorkspace=a.onGoToWorkspace.bind(Object(p.a)(a)),a.onGoToSearchList=a.onGoToSearchList.bind(Object(p.a)(a)),a.onInfo=a.onInfo.bind(Object(p.a)(a)),a.onInfoClosed=a.onInfoClosed.bind(Object(p.a)(a)),a.onPfunctionRun=a.onPfunctionRun.bind(Object(p.a)(a)),a.onWorkspaceRemoveItem=a.onWorkspaceRemoveItem.bind(Object(p.a)(a)),f.a.addEventListener("change",(function(){a.onContentSizeChange()})),a.setWeb3(),a}return Object(m.a)(n,[{key:"setWeb3",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z();case 2:return this.web3=e.sent,e.next=5,this.web3.provider.getNetwork();case 5:t=e.sent,this.setState({chainid:parseInt(t.chainId)});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWindowDimensions",value:function(){var e=f.a.get("window"),t=document.getElementById("ChainLensRoot").getBoundingClientRect();return{width:e.width||t.width,height:e.height||t.height}}},{key:"onContentSizeChange",value:function(){this.setState(this.getWindowDimensions())}},{key:"onWorkspaceAddItem",value:function(e){var t=this.state.treedata;t.push(e),this.setState({treedata:t})}},{key:"onWorkspaceRemoveItem",value:function(e){var t=this.state.treedata,n=t.findIndex((function(t){return t._id===e._id}));t.splice(n,1),this.setState({treedata:t})}},{key:"onQueryChange",value:function(e){var t=e.genQuery,n=e.fxQuery,a={},o={},r={};if(t.valid){var c=function(e){var t={},n={},a={};if(!e.text)return{pclassWhere:t,pfunctionWhere:n,pclassiWhere:a};switch(e.field){case"name":t["data.name"]={like:e.text,options:"i"},n["data.name"]={like:e.text,options:"i"};break;case"address":a["data.deployment.address"]=e.text;break;case"signature":n["data.signature"]=e.text;break;default:console.error("Invalid search parameters: ",e)}return{pclassWhere:t,pfunctionWhere:n,pclassiWhere:a}}(t);a=c.pclassWhere,o=c.pfunctionWhere,r=c.pclassiWhere}n.valid&&(o=Object(u.a)(Object(u.a)({},o),function(e){var t={};return e.text?(t["data.gapi.".concat(e.field)]={inq:[{type:e.text}]},t):t}(n))),console.log("pclassiWhere",JSON.stringify(r)),console.log("pclassWhere",JSON.stringify(a)),console.log("pfunctionWhere",JSON.stringify(o));var l=JSON.stringify(a)!==JSON.stringify(this.state.pclassWhere)||JSON.stringify(o)!==JSON.stringify(this.state.pfunctionWhere)||JSON.stringify(r)!==JSON.stringify(this.state.pclassiWhere);if(console.log("isChanged",l),l){var i=Object.assign({},this.DEFAULT_FILTER);this.setState({pclassWhere:a,pfunctionWhere:o,pclassiWhere:r,filter:i})}this.onGoToSearchList()}},{key:"onAddListPage",value:function(){var e=this.state.filter;e.skip+=30,this.setState({filter:e})}},{key:"onPreviousPage",value:function(){var e=this.state.filter;e.skip-=30,this.setState({filter:e})}},{key:"onGoToSearchList",value:function(){var e=this.state,t=e.width,n=e.height,a=ge(this.PAGE_NUMBER,{width:t,height:n});this.scrollRef.current.scrollTo({x:a.minWidth,y:0,animated:!0})}},{key:"onGoToSearch",value:function(){this.scrollRef.current.scrollTo({x:0,y:0,animated:!0})}},{key:"onGoToWorkspace",value:function(){this.scrollRef.current.scrollToEnd()}},{key:"onInfo",value:function(e){this.setState({showPclassInfo:e,runPfunction:null}),this.onGoToWorkspace()}},{key:"onInfoClosed",value:function(){this.setState({showPclassInfo:null,runPfunction:null}),this.onGoToSearchList()}},{key:"onPfunctionRun",value:function(e){this.setState({runPfunction:e,showPclassInfo:null}),this.onGoToWorkspace()}},{key:"render",value:function(){var e=this.state,t=e.width,n=e.height,a=e.treedata,r=e.showPclassInfo,c=e.runPfunction,l=e.pclassWhere,i=e.pfunctionWhere,s=e.pclassiWhere,u=e.filter,d=e.chainid,m=ge(this.PAGE_NUMBER,{width:t,height:n}),p={pclassWhere:l,pfunctionWhere:i,pclassiWhere:s},h=Object.keys(i)[0]||"",y=h.includes("data.gapi")||h.includes("data.signature"),f=(Object.keys(s)[0]||"").includes("address");return d&&(l["metadata.chainids"]={inq:[d]},i["metadata.chainids"]={inq:[d]},s["data.deployment.chainid"]=d),o.a.createElement(g.a,{ref:this.scrollRef,horizontal:!0,pagingEnabled:!0,scrollEnabled:!0,scrollEventThrottle:100,nestedScrollEnabled:!0,contentContainerStyle:{width:"100%"},onContentSizeChange:this.onContentSizeChange},o.a.createElement(k,{styles:m,chain:{id:d,name:ee[d]},onQueryChange:this.onQueryChange}),y?o.a.createElement(K,{whereFilters:p,whereFilter:i,filter:u,styles:m,treedataLen:a.length,onAddListPage:this.onAddListPage,onPreviousPage:this.onPreviousPage,onSelect:this.onWorkspaceAddItem,onGoToSearch:this.onGoToSearch,onGoToWorkspace:this.onGoToWorkspace,onInfo:this.onInfo,onPfunctionRun:this.onPfunctionRun}):f?o.a.createElement($,{whereFilters:p,whereFilter:s,filter:u,styles:m,treedataLen:a.length,onAddListPage:this.onAddListPage,onPreviousPage:this.onPreviousPage,onSelect:this.onWorkspaceAddItem,onGoToSearch:this.onGoToSearch,onGoToWorkspace:this.onGoToWorkspace,onInfo:this.onInfo,onPfunctionRun:this.onPfunctionRun}):o.a.createElement(q,{whereFilters:p,whereFilter:l,filter:u,styles:m,treedataLen:a.length,onAddListPage:this.onAddListPage,onPreviousPage:this.onPreviousPage,onSelect:this.onWorkspaceAddItem,onGoToSearch:this.onGoToSearch,onGoToWorkspace:this.onGoToWorkspace,onInfo:this.onInfo,onPfunctionRun:this.onPfunctionRun}),r?o.a.createElement(re,{styles:m,pclass:r,onInfoClosed:this.onInfoClosed}):c?o.a.createElement(ye,{key:c.pfunction._id,styles:m,item:c,onInfoClosed:this.onInfoClosed}):o.a.createElement(R,{treedata:a,styles:m,onGoToSearchList:this.onGoToSearchList,onRemove:this.onWorkspaceRemoveItem}))}}]),n}(a.Component);var ve=function(){return o.a.createElement(v.Container,{style:Ee.container},o.a.createElement(be,null))},Ee=b.a.create({buttonStyle:{backgroundColor:"#cccccc"},container:{width:"100%",height:"100%"}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(ve,null),document.getElementById("ChainLensRoot")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[271,1,2]]]);
//# sourceMappingURL=main.7274943b.chunk.js.map